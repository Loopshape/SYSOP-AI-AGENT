(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yo,To;function Co(){return{geminiUrl:yo,vertexUrl:To}}function vo(n,e,t,o){var r,l;if(!n?.baseUrl){const a=Co();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:t:(l=a.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j{}function T(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(n,e,t){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in n))if(Array.isArray(t))n[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[u])){const d=n[u];if(Array.isArray(t))for(let c=0;c<d.length;c++){const f=d[c];s(f,e.slice(l+1),t[c])}else for(const c of d)s(c,e.slice(l+1),t)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in n||(n[u]=[{}]);const d=n[u];s(d[0],e.slice(l+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function i(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const o=e[t];if(o.endsWith("[]")){const r=o.slice(0,-2);if(r in n){const l=n[r];return Array.isArray(l)?l.map(a=>i(a,e.slice(t+1))):void 0}else return}else n=n[o]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ze(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eo(n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["_url","operationName"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function So(n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["operationName"],t);const o=i(n,["resourceName"]);o!=null&&s(e,["_url","resourceName"],o);const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function _o(n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["_url","operationName"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Io(n){const e={},t=i(n,["video","uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],ze(o));const r=i(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function Ao(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Io(t)),e}function Mo(n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Ao(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Ro(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],Mo(a)),e}function Po(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],ze(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function xo(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Po(t)),e}function No(n){const e={},t=i(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>xo(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function wo(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],No(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ln;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ln||(ln={}));var an;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(an||(an={}));var U;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(U||(U={}));var un;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(un||(un={}));var cn;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(cn||(cn={}));var dn;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(dn||(dn={}));var fn;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(fn||(fn={}));var pn;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(pn||(pn={}));var mn;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(mn||(mn={}));var gn;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(gn||(gn={}));var hn;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(hn||(hn={}));var yn;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(yn||(yn={}));var Tn;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Tn||(Tn={}));var Cn;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Cn||(Cn={}));var vn;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(vn||(vn={}));var Me;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Me||(Me={}));var En;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(En||(En={}));var qe;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(qe||(qe={}));var Sn;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Sn||(Sn={}));var _n;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(_n||(_n={}));var In;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(In||(In={}));var An;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(An||(An={}));var Mn;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Mn||(Mn={}));var Rn;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Rn||(Rn={}));var Pn;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Pn||(Pn={}));var xn;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(xn||(xn={}));var Nn;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Nn||(Nn={}));var wn;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(wn||(wn={}));var Dn;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Dn||(Dn={}));var kn;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(kn||(kn={}));var Ln;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ln||(Ln={}));var Un;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Un||(Un={}));var Fn;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Fn||(Fn={}));var Vn;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Vn||(Vn={}));var qn;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(qn||(qn={}));var Gn;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Gn||(Gn={}));var Hn;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Hn||(Hn={}));var $n;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})($n||($n={}));var Bn;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Bn||(Bn={}));var Jn;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Jn||(Jn={}));var Yn;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Yn||(Yn={}));var Wn;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Wn||(Wn={}));var Kn;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Kn||(Kn={}));var bn;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(bn||(bn={}));var zn;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(zn||(zn={}));var Xn;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Xn||(Xn={}));var Qn;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Qn||(Qn={}));var oe;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(oe||(oe={}));class Ge{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class pe{get text(){var e,t,o,r,l,a,u,d;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const m of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[g,h]of Object.entries(m))g!=="text"&&g!=="thought"&&(h!==null||h!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,t,o,r,l,a,u,d;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,o,r,l,a,u,d;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(c?.length!==0)return c}get executableCode(){var e,t,o,r,l,a,u,d,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(f?.length!==0)return(c=f?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,o,r,l,a,u,d,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(f?.length!==0)return(c=f?.[0])===null||c===void 0?void 0:c.output}}class Zn{}class On{}class Do{}class ko{}class Lo{}class Uo{}class jn{}class et{}class nt{}class Fo{}class Re{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const o=new Re;let r;const l=e;return t?r=wo(l):r=Ro(l),Object.assign(o,r),o}}class tt{}class ot{}class it{}class Vo{}class qo{}class Go{}class st{}class Ho{get text(){var e,t,o;let r="",l=!1;const a=[];for(const u of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,o;let r="";const l=[];for(const a of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class $o{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function wt(n,e){const t=x(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Dt(n){return Array.isArray(n)?n.map(e=>Pe(e)):[Pe(n)]}function Pe(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function kt(n){const e=Pe(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Lt(n){const e=Pe(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function rt(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Ut(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>rt(e)):[rt(n)]}function He(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function lt(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function at(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function V(n){if(n==null)throw new Error("ContentUnion is required");return He(n)?n:{role:"user",parts:Ut(n)}}function Xe(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=V(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=V(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>V(t)):[V(e)]}function H(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(lt(n)||at(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[V(n)]}const e=[],t=[],o=He(n[0]);for(const r of n){const l=He(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(lt(r)||at(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:Ut(t)}),e}function Bo(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(U).includes(t[0].toUpperCase())?t[0].toUpperCase():U.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(U).includes(o.toUpperCase())?o.toUpperCase():U.TYPE_UNSPECIFIED})}}function ie(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Bo(n.type,e);for(const[a,u]of Object.entries(n))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(U).includes(u.toUpperCase())?u.toUpperCase():U.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=ie(u);else if(o.includes(a)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(ie(c))}e[a]=d}else if(r.includes(a)){const d={};for(const[c,f]of Object.entries(u))d[c]=ie(f);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function Qe(n){return ie(n)}function Ze(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Oe(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ue(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ie(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ie(e.response));return n}function ce(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Jo(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Q(n,e){if(typeof e!="string")throw new Error("name must be a string");return Jo(n,e,"cachedContents")}function Ft(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ee(n){return ze(n)}function Yo(n){return n!=null&&typeof n=="object"&&"name"in n}function Wo(n){return n!=null&&typeof n=="object"&&"video"in n}function Ko(n){return n!=null&&typeof n=="object"&&"uri"in n}function Vt(n){var e;let t;if(Yo(n)&&(t=n.name),!(Ko(n)&&(t=n.uri,t===void 0))&&!(Wo(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function qt(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Gt(n){for(const e of["models","tunedModels","publisherModels"])if(bo(n,e))return n[e];return[]}function bo(n,e){return n!==null&&typeof n=="object"&&e in n}function zo(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Xo(n,e={}){const t=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=zo(r,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function Ht(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Qo(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function $t(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const d=a.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function de(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Bt(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zo(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Oo(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function jo(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ei(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function ni(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Zo(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Oo(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],jo(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],ei(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=i(n,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Jt(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>ni(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function ti(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const u=i(n,["format"]);u!=null&&s(e,["format"],u);const d=i(n,["items"]);d!=null&&s(e,["items"],d);const c=i(n,["maxItems"]);c!=null&&s(e,["maxItems"],c);const f=i(n,["maxLength"]);f!=null&&s(e,["maxLength"],f);const p=i(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=i(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const C=i(n,["minimum"]);C!=null&&s(e,["minimum"],C);const S=i(n,["nullable"]);S!=null&&s(e,["nullable"],S);const v=i(n,["pattern"]);v!=null&&s(e,["pattern"],v);const E=i(n,["properties"]);E!=null&&s(e,["properties"],E);const A=i(n,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const I=i(n,["required"]);I!=null&&s(e,["required"],I);const N=i(n,["title"]);N!=null&&s(e,["title"],N);const w=i(n,["type"]);return w!=null&&s(e,["type"],w),e}function oi(n){const e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=i(n,["category"]);t!=null&&s(e,["category"],t);const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function ii(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const d=i(n,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function si(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function ri(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],si(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function li(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function ai(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],li(t)),e}function ui(){return{}}function ci(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function di(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(c=>ii(c))),s(e,["functionDeclarations"],d)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],ri(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],ai(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],ui());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],ci(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function fi(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function pi(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function mi(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],pi(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function gi(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],fi(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],mi(o)),e}function hi(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Yt(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],hi(t)),e}function yi(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],Yt(o)),e}function Ti(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>yi(r))),s(e,["speakerVoiceConfigs"],o)}return e}function Ci(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],Yt(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],Ti(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function vi(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function Ei(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],Jt(V(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&s(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&s(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&s(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const y=i(e,["seed"]);y!=null&&s(o,["seed"],y);const C=i(e,["responseMimeType"]);C!=null&&s(o,["responseMimeType"],C);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],ti(Qe(S)));const v=i(e,["responseJsonSchema"]);if(v!=null&&s(o,["responseJsonSchema"],v),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=i(e,["safetySettings"]);if(t!==void 0&&E!=null){let D=E;Array.isArray(D)&&(D=D.map(J=>oi(J))),s(t,["safetySettings"],D)}const A=i(e,["tools"]);if(t!==void 0&&A!=null){let D=ce(A);Array.isArray(D)&&(D=D.map(J=>di(ue(J)))),s(t,["tools"],D)}const I=i(e,["toolConfig"]);if(t!==void 0&&I!=null&&s(t,["toolConfig"],gi(I)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=i(e,["cachedContent"]);t!==void 0&&N!=null&&s(t,["cachedContent"],Q(n,N));const w=i(e,["responseModalities"]);w!=null&&s(o,["responseModalities"],w);const F=i(e,["mediaResolution"]);F!=null&&s(o,["mediaResolution"],F);const M=i(e,["speechConfig"]);if(M!=null&&s(o,["speechConfig"],Ci(Ze(M))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=i(e,["thinkingConfig"]);return k!=null&&s(o,["thinkingConfig"],vi(k)),o}function Si(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["request","model"],x(n,o));const r=i(e,["contents"]);if(r!=null){let a=H(r);Array.isArray(a)&&(a=a.map(u=>Jt(u))),s(t,["request","contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["request","generationConfig"],Ei(n,l,t)),t}function _i(n,e){const t={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&s(t,["fileName"],o);const r=i(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Si(n,a))),s(t,["requests","requests"],l)}return t}function Ii(n,e){const t={},o=i(n,["displayName"]);if(e!==void 0&&o!=null&&s(e,["batch","displayName"],o),i(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Ue(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["src"]);r!=null&&s(t,["batch","inputConfig"],_i(n,Ht(n,r)));const l=i(e,["config"]);return l!=null&&s(t,["config"],Ii(l,t)),t}function Ai(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Mi(n,e){const t={},o=i(e,["contents"]);o!=null&&s(t,["requests[]","request","content"],Xe(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Ai(r,t)),t}function Ri(n,e){const t={},o=i(e,["fileName"]);o!=null&&s(t,["file_name"],o);const r=i(e,["inlinedRequests"]);return r!=null&&s(t,["requests"],Mi(n,r)),t}function Pi(n,e){const t={},o=i(n,["displayName"]);return e!==void 0&&o!=null&&s(e,["batch","displayName"],o),t}function Fe(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["src"]);r!=null&&s(t,["batch","inputConfig"],Ri(n,r));const l=i(e,["config"]);return l!=null&&s(t,["config"],Pi(l,t)),t}function xi(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],de(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ni(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],de(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function wi(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);if(e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),i(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Di(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],wi(t,e)),e}function ki(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],de(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Li(n){const e={},t=i(n,["format"]);t!=null&&s(e,["instancesFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsSource","uris"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigquerySource","inputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Ui(n){const e={},t=i(n,["format"]);t!=null&&s(e,["predictionsFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsDestination","outputUriPrefix"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigqueryDestination","outputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(i(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Fi(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["dest"]);return e!==void 0&&r!=null&&s(e,["outputConfig"],Ui(Qo(r))),t}function Vi(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],x(n,o));const r=i(e,["src"]);r!=null&&s(t,["inputConfig"],Li(Ht(n,r)));const l=i(e,["config"]);return l!=null&&s(t,["config"],Fi(l,t)),t}function qi(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],de(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Gi(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],de(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Hi(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function $i(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Hi(t,e)),e}function Bi(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],de(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ji(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Yi(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Wi(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ki(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function bi(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Ji(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Yi(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Wi(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Ki(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=i(n,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function zi(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>bi(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Xi(n){const e={},t=i(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function Qi(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Zi(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Qi(r))),s(e,["urlMetadata"],o)}return e}function Oi(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],zi(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Xi(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Zi(a));const u=i(n,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const d=i(n,["groundingMetadata"]);d!=null&&s(e,["groundingMetadata"],d);const c=i(n,["index"]);c!=null&&s(e,["index"],c);const f=i(n,["logprobsResult"]);f!=null&&s(e,["logprobsResult"],f);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function ji(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>Oi(c))),s(e,["candidates"],d)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function je(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["code"]);o!=null&&s(e,["code"],o);const r=i(n,["message"]);return r!=null&&s(e,["message"],r),e}function es(n){const e={},t=i(n,["response"]);t!=null&&s(e,["response"],ji(t));const o=i(n,["error"]);return o!=null&&s(e,["error"],je(o)),e}function ns(n){const e={},t=i(n,["values"]);return t!=null&&s(e,["values"],t),e}function ts(n){const e={},t=i(n,["embedding"]);t!=null&&s(e,["embedding"],ns(t));const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function os(n){const e={},t=i(n,["response"]);t!=null&&s(e,["response"],ts(t));const o=i(n,["error"]);return o!=null&&s(e,["error"],je(o)),e}function is(n){const e={},t=i(n,["responsesFile"]);t!=null&&s(e,["fileName"],t);const o=i(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>es(a))),s(e,["inlinedResponses"],l)}const r=i(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>os(a))),s(e,["inlinedEmbedContentResponses"],l)}return e}function ne(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata","displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["metadata","state"]);r!=null&&s(e,["state"],Bt(r));const l=i(n,["metadata","createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["metadata","endTime"]);a!=null&&s(e,["endTime"],a);const u=i(n,["metadata","updateTime"]);u!=null&&s(e,["updateTime"],u);const d=i(n,["metadata","model"]);d!=null&&s(e,["model"],d);const c=i(n,["metadata","output"]);return c!=null&&s(e,["dest"],is($t(c))),e}function ss(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>ne(a))),s(e,["batchJobs"],l)}return e}function rs(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],je(l)),e}function Wt(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["code"]);o!=null&&s(e,["code"],o);const r=i(n,["message"]);return r!=null&&s(e,["message"],r),e}function ls(n){const e={},t=i(n,["instancesFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsSource","uris"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigquerySource","inputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function as(n){const e={},t=i(n,["predictionsFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsDestination","outputUriPrefix"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigqueryDestination","outputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function $e(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],Bt(r));const l=i(n,["error"]);l!=null&&s(e,["error"],Wt(l));const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["startTime"]);u!=null&&s(e,["startTime"],u);const d=i(n,["endTime"]);d!=null&&s(e,["endTime"],d);const c=i(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const f=i(n,["model"]);f!=null&&s(e,["model"],f);const p=i(n,["inputConfig"]);p!=null&&s(e,["src"],ls(p));const m=i(n,["outputConfig"]);return m!=null&&s(e,["dest"],as($t(m))),e}function us(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>$e(a))),s(e,["batchJobs"],l)}return e}function cs(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],Wt(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var O;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(O||(O={}));class ve{constructor(e,t,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,r)}init(e,t,o){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ds extends j{constructor(e){super(),this.apiClient=e,this.create=async t=>{var o,r;if(this.apiClient.isVertexAI())return t.config=this.formatDestination(t.src,t.config),this.createInternal(t);const l=t.src;if(!(Array.isArray(t.src)||l.inlinedRequests!==void 0))return this.createInternal(t);const u=this.createInlinedGenerateContentRequest(t),d=u.path,c=u.body,f=Ue(this.apiClient,t)._query||{};return this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()).then(m=>ne(m))},this.createEmbeddings=async t=>{var o,r;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(t.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(t);const u=this.createInlinedEmbedContentRequest(t),d=u.path,c=u.body,f=Fe(this.apiClient,t)._query||{};return this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()).then(m=>ne(m))},this.list=async(t={})=>new ve(O.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=Ue(this.apiClient,e),o=t._url,r=T("{model}:batchGenerateContent",o),u=t.batch.inputConfig.requests,d=u.requests,c=[];for(const f of d){const p=Object.assign({},f);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const g=p.request;g.systemInstruction=m,p.request=g}c.push(p)}return u.requests=c,delete t.config,delete t._url,delete t._query,{path:r,body:t}}createInlinedEmbedContentRequest(e){const t=Fe(this.apiClient,e),o=t._url,r=T("{model}:asyncBatchEmbedContent",o),u=t.batch.inputConfig.requests,d=u.requests,c=[];delete u.config;for(const f of d){const p=Object.assign({},f),m=p.request;for(const g in p)g!=="request"&&(m[g]=p[g],delete p[g]);c.push(p)}return u.requests=c,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),a=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(a)o.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Vi(this.apiClient,e);return u=T("batchPredictionJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>$e(f))}else{const c=Ue(this.apiClient,e);return u=T("{model}:batchGenerateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>ne(f))}}async createEmbeddingsInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Fe(this.apiClient,e);return l=T("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>ne(d))}}async get(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=qi(this.apiClient,e);return u=T("batchPredictionJobs/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>$e(f))}else{const c=xi(this.apiClient,e);return u=T("batches/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>ne(f))}}async cancel(e){var t,o,r,l;let a="",u={};if(this.apiClient.isVertexAI()){const d=Gi(this.apiClient,e);a=T("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=Ni(this.apiClient,e);a=T("batches/{name}:cancel",d._url),u=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=$i(e);return u=T("batchPredictionJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=us(f),m=new st;return Object.assign(m,p),m})}else{const c=Di(e);return u=T("batches",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=ss(f),m=new st;return Object.assign(m,p),m})}}async delete(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Bi(this.apiClient,e);return u=T("batchPredictionJobs/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>cs(f))}else{const c=ki(this.apiClient,e);return u=T("batches/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>rs(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fs(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ps(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ms(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function gs(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function hs(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],fs(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],ps(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],ms(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],gs(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=i(n,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function ut(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>hs(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function ys(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const d=i(n,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function Ts(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Cs(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Ts(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function vs(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Es(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],vs(t)),e}function Ss(){return{}}function _s(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function Is(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(c=>ys(c))),s(e,["functionDeclarations"],d)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],Cs(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Es(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],Ss());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],_s(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function As(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function Ms(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Rs(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],Ms(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Ps(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],As(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Rs(o)),e}function xs(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let f=H(a);Array.isArray(f)&&(f=f.map(p=>ut(p))),s(e,["contents"],f)}const u=i(n,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],ut(V(u)));const d=i(n,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(p=>Is(p))),s(e,["tools"],f)}const c=i(n,["toolConfig"]);if(e!==void 0&&c!=null&&s(e,["toolConfig"],Ps(c)),i(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Ns(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],wt(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],xs(r,t)),t}function ws(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ds(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function ks(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function Ls(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],ks(r,t)),t}function Us(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Fs(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Us(t,e)),e}function Vs(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function qs(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Gs(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Hs(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function $s(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Vs(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],qs(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Gs(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Hs(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=i(n,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function ct(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>$s(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Bs(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function Js(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Ys(n){const e={},t=i(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],Js(t));const o=i(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function Ws(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Ks(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Ws(t)),e}function bs(n){const e={},t=i(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function zs(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function Xs(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],zs(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(n,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function Qs(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],Xs(t)),e}function Zs(){return{}}function Os(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function js(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>Bs(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],Ys(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Ks(l));const a=i(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],bs(a));const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],Qs(u)),i(n,["urlContext"])!=null&&s(e,["urlContext"],Zs());const c=i(n,["computerUse"]);c!=null&&s(e,["computerUse"],Os(c));const f=i(n,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function er(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function nr(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function tr(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],nr(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function or(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],er(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],tr(o)),e}function ir(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let p=H(a);Array.isArray(p)&&(p=p.map(m=>ct(m))),s(e,["contents"],p)}const u=i(n,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],ct(V(u)));const d=i(n,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>js(m))),s(e,["tools"],p)}const c=i(n,["toolConfig"]);e!==void 0&&c!=null&&s(e,["toolConfig"],or(c));const f=i(n,["kmsKeyName"]);return e!==void 0&&f!=null&&s(e,["encryption_spec","kmsKeyName"],f),t}function sr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],wt(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],ir(r,t)),t}function rr(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function lr(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function ar(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function ur(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],ar(r,t)),t}function cr(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function dr(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],cr(t,e)),e}function _e(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["model"]);r!=null&&s(e,["model"],r);const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const u=i(n,["expireTime"]);u!=null&&s(e,["expireTime"],u);const d=i(n,["usageMetadata"]);return d!=null&&s(e,["usageMetadata"],d),e}function fr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function pr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>_e(a))),s(e,["cachedContents"],l)}return e}function Ie(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["model"]);r!=null&&s(e,["model"],r);const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const u=i(n,["expireTime"]);u!=null&&s(e,["expireTime"],u);const d=i(n,["usageMetadata"]);return d!=null&&s(e,["usageMetadata"],d),e}function mr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function gr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ie(a))),s(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hr extends j{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ve(O.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=sr(this.apiClient,e);return u=T("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ie(f))}else{const c=Ns(this.apiClient,e);return u=T("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>_e(f))}}async get(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=rr(this.apiClient,e);return u=T("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ie(f))}else{const c=ws(this.apiClient,e);return u=T("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>_e(f))}}async delete(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=lr(this.apiClient,e);return u=T("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=mr(f),m=new ot;return Object.assign(m,p),m})}else{const c=Ds(this.apiClient,e);return u=T("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=fr(f),m=new ot;return Object.assign(m,p),m})}}async update(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ur(this.apiClient,e);return u=T("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Ie(f))}else{const c=Ls(this.apiClient,e);return u=T("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>_e(f))}}async listInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=dr(e);return u=T("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=gr(f),m=new it;return Object.assign(m,p),m})}else{const c=Fs(e);return u=T("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=pr(f),m=new it;return Object.assign(m,p),m})}}}function dt(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function L(n){return this instanceof L?(this.v=n,this):new L(n)}function se(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(g){return function(h){return Promise.resolve(h).then(g,p)}}function u(g,h){o[g]&&(r[g]=function(y){return new Promise(function(C,S){l.push([g,y,C,S])>1||d(g,y)})},h&&(r[g]=h(r[g])))}function d(g,h){try{c(o[g](h))}catch(y){m(l[0][3],y)}}function c(g){g.value instanceof L?Promise.resolve(g.value.v).then(f,p):m(l[0][2],g)}function f(g){d("next",g)}function p(g){d("throw",g)}function m(g,h){g(h),l.shift(),l.length&&d(l[0][0],l[0][1])}}function ge(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof dt=="function"?dt(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(a){return new Promise(function(u,d){a=n[l](a),r(u,d,a.done,a.value)})}}function r(l,a,u,d){Promise.resolve(d).then(function(c){l({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yr(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Kt(t)}function Kt(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Tr(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ft(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let l=!0;for(;o<t&&n[o].role==="model";)r.push(n[o]),l&&!Kt(n[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class Cr{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new vr(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class vr{constructor(e,t,o,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),Tr(l)}async sendMessage(e){var t;await this.sendPromise;const o=V(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,a,u;const d=await r,c=(a=(l=d.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(p))!==null&&u!==void 0?u:[]);const g=c?[c]:[];this.recordHistory(o,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const o=V(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?ft(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var o,r;return se(this,arguments,function*(){var a,u,d,c;const f=[];try{for(var p=!0,m=ge(e),g;g=yield L(m.next()),a=g.done,!a;p=!0){c=g.value,p=!1;const h=c;if(yr(h)){const y=(r=(o=h.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;y!==void 0&&f.push(y)}yield yield L(h)}}catch(h){u={error:h}}finally{try{!p&&!a&&(d=m.return)&&(yield L(d.call(m)))}finally{if(u)throw u.error}}this.recordHistory(t,f)})}recordHistory(e,t,o){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...ft(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xe extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,xe.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Er(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Sr(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Er(t,e)),e}function _r(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["message"]);o!=null&&s(e,["message"],o);const r=i(n,["code"]);return r!=null&&s(e,["code"],r),e}function Ir(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const d=i(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=i(n,["sha256Hash"]);c!=null&&s(e,["sha256Hash"],c);const f=i(n,["uri"]);f!=null&&s(e,["uri"],f);const p=i(n,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=i(n,["state"]);m!=null&&s(e,["state"],m);const g=i(n,["source"]);g!=null&&s(e,["source"],g);const h=i(n,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const y=i(n,["error"]);return y!=null&&s(e,["error"],_r(y)),e}function Ar(n){const e={},t=i(n,["file"]);t!=null&&s(e,["file"],Ir(t));const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Mr(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","file"],Vt(t));const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Rr(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","file"],Vt(t));const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Pr(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["message"]);o!=null&&s(e,["message"],o);const r=i(n,["code"]);return r!=null&&s(e,["code"],r),e}function Be(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const d=i(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=i(n,["sha256Hash"]);c!=null&&s(e,["sha256Hash"],c);const f=i(n,["uri"]);f!=null&&s(e,["uri"],f);const p=i(n,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=i(n,["state"]);m!=null&&s(e,["state"],m);const g=i(n,["source"]);g!=null&&s(e,["source"],g);const h=i(n,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const y=i(n,["error"]);return y!=null&&s(e,["error"],Pr(y)),e}function xr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Be(a))),s(e,["files"],l)}return e}function Nr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function wr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dr extends j{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ve(O.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Be(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Sr(e);return l=T("files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=xr(d),f=new Vo;return Object.assign(f,c),f})}}async createInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ar(e);return l=T("upload/v1beta/files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=Nr(d),f=new qo;return Object.assign(f,c),f})}}async get(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Mr(e);return l=T("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>Be(d))}}async delete(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Rr(e);return l=T("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=wr(d),f=new Go;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kr(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function bt(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],kr(t)),e}function Lr(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],bt(o)),e}function Ur(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Lr(r))),s(e,["speakerVoiceConfigs"],o)}return e}function Fr(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],bt(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],Ur(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Vr(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function qr(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Gr(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Hr(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function $r(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Vr(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],qr(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Gr(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Hr(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=i(n,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Br(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>$r(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Jr(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const d=i(n,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function Yr(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Wr(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Yr(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Kr(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function br(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Kr(t)),e}function zr(){return{}}function Xr(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function Qr(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(c=>Jr(c))),s(e,["functionDeclarations"],d)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],Wr(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],br(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],zr());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],Xr(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function Zr(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function pt(){return{}}function Or(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function jr(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],Or(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function el(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function nl(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],el(o)),e}function tl(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function ol(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const d=i(n,["maxOutputTokens"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(n,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Fr(Oe(p)));const m=i(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],Br(V(g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let I=ce(h);Array.isArray(I)&&(I=I.map(N=>Qr(ue(N)))),s(e,["setup","tools"],I)}const y=i(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],Zr(y));const C=i(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&s(e,["setup","inputAudioTranscription"],pt());const S=i(n,["outputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","outputAudioTranscription"],pt());const v=i(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],jr(v));const E=i(n,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],nl(E));const A=i(n,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],tl(A)),t}function il(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],ol(r,t)),t}function sl(){return{}}function rl(){return{}}function ll(n){const e={},t=i(n,["media"]);t!=null&&s(e,["mediaChunks"],Dt(t));const o=i(n,["audio"]);o!=null&&s(e,["audio"],Lt(o));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],kt(l));const a=i(n,["text"]);return a!=null&&s(e,["text"],a),i(n,["activityStart"])!=null&&s(e,["activityStart"],sl()),i(n,["activityEnd"])!=null&&s(e,["activityEnd"],rl()),e}function zt(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["weight"]);return o!=null&&s(e,["weight"],o),e}function al(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>zt(r))),s(e,["weightedPrompts"],o)}return e}function Xt(n){const e={},t=i(n,["temperature"]);t!=null&&s(e,["temperature"],t);const o=i(n,["topK"]);o!=null&&s(e,["topK"],o);const r=i(n,["seed"]);r!=null&&s(e,["seed"],r);const l=i(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(n,["bpm"]);a!=null&&s(e,["bpm"],a);const u=i(n,["density"]);u!=null&&s(e,["density"],u);const d=i(n,["brightness"]);d!=null&&s(e,["brightness"],d);const c=i(n,["scale"]);c!=null&&s(e,["scale"],c);const f=i(n,["muteBass"]);f!=null&&s(e,["muteBass"],f);const p=i(n,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=i(n,["onlyBassAndDrums"]);m!=null&&s(e,["onlyBassAndDrums"],m);const g=i(n,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function ul(n){const e={},t=i(n,["musicGenerationConfig"]);return t!=null&&s(e,["musicGenerationConfig"],Xt(t)),e}function Qt(n){const e={},t=i(n,["model"]);return t!=null&&s(e,["model"],t),e}function Zt(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>zt(r))),s(e,["weightedPrompts"],o)}return e}function Je(n){const e={},t=i(n,["setup"]);t!=null&&s(e,["setup"],Qt(t));const o=i(n,["clientContent"]);o!=null&&s(e,["clientContent"],Zt(o));const r=i(n,["musicGenerationConfig"]);r!=null&&s(e,["musicGenerationConfig"],Xt(r));const l=i(n,["playbackControl"]);return l!=null&&s(e,["playbackControl"],l),e}function cl(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function dl(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],cl(t)),e}function fl(n){const e={},t=i(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],dl(t)),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function pl(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ml(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function gl(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function hl(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function yl(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],pl(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],ml(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],gl(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],hl(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=i(n,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Tl(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>yl(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Cl(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function vl(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function El(n){const e={},t=i(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],vl(t));const o=i(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function Sl(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function _l(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Sl(t)),e}function Il(n){const e={},t=i(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function Al(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function Ml(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],Al(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(n,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function Rl(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],Ml(t)),e}function Pl(){return{}}function xl(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function Nl(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>Cl(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],El(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],_l(l));const a=i(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],Il(a));const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],Rl(u)),i(n,["urlContext"])!=null&&s(e,["urlContext"],Pl());const c=i(n,["computerUse"]);c!=null&&s(e,["computerUse"],xl(c));const f=i(n,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function wl(n){const e={},t=i(n,["handle"]);t!=null&&s(e,["handle"],t);const o=i(n,["transparent"]);return o!=null&&s(e,["transparent"],o),e}function mt(){return{}}function Dl(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function kl(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],Dl(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function Ll(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function Ul(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],Ll(o)),e}function Fl(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function Vl(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const d=i(n,["maxOutputTokens"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(n,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],fl(Oe(p)));const m=i(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],Tl(V(g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let I=ce(h);Array.isArray(I)&&(I=I.map(N=>Nl(ue(N)))),s(e,["setup","tools"],I)}const y=i(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],wl(y));const C=i(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&s(e,["setup","inputAudioTranscription"],mt());const S=i(n,["outputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","outputAudioTranscription"],mt());const v=i(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],kl(v));const E=i(n,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],Ul(E));const A=i(n,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],Fl(A)),t}function ql(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Vl(r,t)),t}function Gl(){return{}}function Hl(){return{}}function $l(n){const e={},t=i(n,["media"]);t!=null&&s(e,["mediaChunks"],Dt(t));const o=i(n,["audio"]);o!=null&&s(e,["audio"],Lt(o));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],kt(l));const a=i(n,["text"]);return a!=null&&s(e,["text"],a),i(n,["activityStart"])!=null&&s(e,["activityStart"],Gl()),i(n,["activityEnd"])!=null&&s(e,["activityEnd"],Hl()),e}function Bl(){return{}}function Jl(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Yl(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Wl(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ot(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Kl(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Jl(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Yl(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Wl(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Ot(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=i(n,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function bl(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Kl(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function gt(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["finished"]);return o!=null&&s(e,["finished"],o),e}function zl(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Xl(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>zl(r))),s(e,["urlMetadata"],o)}return e}function Ql(n){const e={},t=i(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],bl(t));const o=i(n,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const u=i(n,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],gt(u));const d=i(n,["outputTranscription"]);d!=null&&s(e,["outputTranscription"],gt(d));const c=i(n,["urlContextMetadata"]);c!=null&&s(e,["urlContextMetadata"],Xl(c));const f=i(n,["turnCompleteReason"]);f!=null&&s(e,["turnCompleteReason"],f);const p=i(n,["waitingForInput"]);return p!=null&&s(e,["waitingForInput"],p),e}function Zl(n){const e={},t=i(n,["functionCalls"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Ot(r))),s(e,["functionCalls"],o)}return e}function Ol(n){const e={},t=i(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function Ee(n){const e={},t=i(n,["modality"]);t!=null&&s(e,["modality"],t);const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function jl(n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const o=i(n,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(n,["responseTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=i(n,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const d=i(n,["promptTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>Ee(g))),s(e,["promptTokensDetails"],m)}const c=i(n,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>Ee(g))),s(e,["cacheTokensDetails"],m)}const f=i(n,["responseTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>Ee(g))),s(e,["responseTokensDetails"],m)}const p=i(n,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>Ee(g))),s(e,["toolUsePromptTokensDetails"],m)}return e}function ea(n){const e={},t=i(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function na(n){const e={},t=i(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const o=i(n,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function ta(n){const e={};i(n,["setupComplete"])!=null&&s(e,["setupComplete"],Bl());const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],Ql(o));const r=i(n,["toolCall"]);r!=null&&s(e,["toolCall"],Zl(r));const l=i(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],Ol(l));const a=i(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],jl(a));const u=i(n,["goAway"]);u!=null&&s(e,["goAway"],ea(u));const d=i(n,["sessionResumptionUpdate"]);return d!=null&&s(e,["sessionResumptionUpdate"],na(d)),e}function oa(){return{}}function ia(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["weight"]);return o!=null&&s(e,["weight"],o),e}function sa(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ia(r))),s(e,["weightedPrompts"],o)}return e}function ra(n){const e={},t=i(n,["temperature"]);t!=null&&s(e,["temperature"],t);const o=i(n,["topK"]);o!=null&&s(e,["topK"],o);const r=i(n,["seed"]);r!=null&&s(e,["seed"],r);const l=i(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(n,["bpm"]);a!=null&&s(e,["bpm"],a);const u=i(n,["density"]);u!=null&&s(e,["density"],u);const d=i(n,["brightness"]);d!=null&&s(e,["brightness"],d);const c=i(n,["scale"]);c!=null&&s(e,["scale"],c);const f=i(n,["muteBass"]);f!=null&&s(e,["muteBass"],f);const p=i(n,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=i(n,["onlyBassAndDrums"]);m!=null&&s(e,["onlyBassAndDrums"],m);const g=i(n,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function la(n){const e={},t=i(n,["clientContent"]);t!=null&&s(e,["clientContent"],sa(t));const o=i(n,["musicGenerationConfig"]);return o!=null&&s(e,["musicGenerationConfig"],ra(o)),e}function aa(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);o!=null&&s(e,["mimeType"],o);const r=i(n,["sourceMetadata"]);return r!=null&&s(e,["sourceMetadata"],la(r)),e}function ua(n){const e={},t=i(n,["audioChunks"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>aa(r))),s(e,["audioChunks"],o)}return e}function ca(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["filteredReason"]);return o!=null&&s(e,["filteredReason"],o),e}function da(n){const e={};i(n,["setupComplete"])!=null&&s(e,["setupComplete"],oa());const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],ua(o));const r=i(n,["filteredPrompt"]);return r!=null&&s(e,["filteredPrompt"],ca(r)),e}function fa(n){const e={},t=i(n,["sessionId"]);return t!=null&&s(e,["sessionId"],t),e}function pa(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ma(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ga(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function jt(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function ha(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],pa(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],ma(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],ga(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],jt(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=i(n,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function ya(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>ha(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function ht(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["finished"]);return o!=null&&s(e,["finished"],o),e}function Ta(n){const e={},t=i(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],ya(t));const o=i(n,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const u=i(n,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],ht(u));const d=i(n,["outputTranscription"]);d!=null&&s(e,["outputTranscription"],ht(d));const c=i(n,["turnCompleteReason"]);c!=null&&s(e,["turnCompleteReason"],c);const f=i(n,["waitingForInput"]);return f!=null&&s(e,["waitingForInput"],f),e}function Ca(n){const e={},t=i(n,["functionCalls"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>jt(r))),s(e,["functionCalls"],o)}return e}function va(n){const e={},t=i(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function Se(n){const e={},t=i(n,["modality"]);t!=null&&s(e,["modality"],t);const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function Ea(n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const o=i(n,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(n,["candidatesTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=i(n,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const d=i(n,["promptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(h=>Se(h))),s(e,["promptTokensDetails"],g)}const c=i(n,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(h=>Se(h))),s(e,["cacheTokensDetails"],g)}const f=i(n,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(h=>Se(h))),s(e,["responseTokensDetails"],g)}const p=i(n,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(h=>Se(h))),s(e,["toolUsePromptTokensDetails"],g)}const m=i(n,["trafficType"]);return m!=null&&s(e,["trafficType"],m),e}function Sa(n){const e={},t=i(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function _a(n){const e={},t=i(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const o=i(n,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function Ia(n){const e={},t=i(n,["setupComplete"]);t!=null&&s(e,["setupComplete"],fa(t));const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],Ta(o));const r=i(n,["toolCall"]);r!=null&&s(e,["toolCall"],Ca(r));const l=i(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],va(l));const a=i(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],Ea(a));const u=i(n,["goAway"]);u!=null&&s(e,["goAway"],Sa(u));const d=i(n,["sessionResumptionUpdate"]);return d!=null&&s(e,["sessionResumptionUpdate"],_a(d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Aa(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ma(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ra(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Pa(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function xa(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Aa(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Ma(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Ra(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Pa(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=i(n,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Ne(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>xa(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Na(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const u=i(n,["format"]);u!=null&&s(e,["format"],u);const d=i(n,["items"]);d!=null&&s(e,["items"],d);const c=i(n,["maxItems"]);c!=null&&s(e,["maxItems"],c);const f=i(n,["maxLength"]);f!=null&&s(e,["maxLength"],f);const p=i(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=i(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const C=i(n,["minimum"]);C!=null&&s(e,["minimum"],C);const S=i(n,["nullable"]);S!=null&&s(e,["nullable"],S);const v=i(n,["pattern"]);v!=null&&s(e,["pattern"],v);const E=i(n,["properties"]);E!=null&&s(e,["properties"],E);const A=i(n,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const I=i(n,["required"]);I!=null&&s(e,["required"],I);const N=i(n,["title"]);N!=null&&s(e,["title"],N);const w=i(n,["type"]);return w!=null&&s(e,["type"],w),e}function wa(n){const e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=i(n,["category"]);t!=null&&s(e,["category"],t);const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function Da(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const d=i(n,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function ka(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function La(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],ka(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Ua(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Fa(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Ua(t)),e}function Va(){return{}}function qa(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function Ga(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(c=>Da(c))),s(e,["functionDeclarations"],d)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],La(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Fa(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],Va());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],qa(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function Ha(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function $a(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Ba(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],$a(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Ja(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Ha(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Ba(o)),e}function Ya(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function eo(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Ya(t)),e}function Wa(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],eo(o)),e}function Ka(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Wa(r))),s(e,["speakerVoiceConfigs"],o)}return e}function ba(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],eo(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],Ka(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function za(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function Xa(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],Ne(V(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&s(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&s(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&s(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const y=i(e,["seed"]);y!=null&&s(o,["seed"],y);const C=i(e,["responseMimeType"]);C!=null&&s(o,["responseMimeType"],C);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],Na(Qe(S)));const v=i(e,["responseJsonSchema"]);if(v!=null&&s(o,["responseJsonSchema"],v),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=i(e,["safetySettings"]);if(t!==void 0&&E!=null){let D=E;Array.isArray(D)&&(D=D.map(J=>wa(J))),s(t,["safetySettings"],D)}const A=i(e,["tools"]);if(t!==void 0&&A!=null){let D=ce(A);Array.isArray(D)&&(D=D.map(J=>Ga(ue(J)))),s(t,["tools"],D)}const I=i(e,["toolConfig"]);if(t!==void 0&&I!=null&&s(t,["toolConfig"],Ja(I)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=i(e,["cachedContent"]);t!==void 0&&N!=null&&s(t,["cachedContent"],Q(n,N));const w=i(e,["responseModalities"]);w!=null&&s(o,["responseModalities"],w);const F=i(e,["mediaResolution"]);F!=null&&s(o,["mediaResolution"],F);const M=i(e,["speechConfig"]);if(M!=null&&s(o,["speechConfig"],ba(Ze(M))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=i(e,["thinkingConfig"]);return k!=null&&s(o,["thinkingConfig"],za(k)),o}function yt(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);if(r!=null){let a=H(r);Array.isArray(a)&&(a=a.map(u=>Ne(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],Xa(n,l,t)),t}function Qa(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Za(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);r!=null&&s(t,["requests[]","content"],Xe(n,r));const l=i(e,["config"]);l!=null&&s(t,["config"],Qa(l,t));const a=i(e,["model"]);return a!==void 0&&s(t,["requests[]","model"],x(n,a)),t}function Oa(n,e){const t={};if(i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);const l=i(n,["guidanceScale"]);if(e!==void 0&&l!=null&&s(e,["parameters","guidanceScale"],l),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&s(e,["parameters","safetySetting"],a);const u=i(n,["personGeneration"]);e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u);const d=i(n,["includeSafetyAttributes"]);e!==void 0&&d!=null&&s(e,["parameters","includeSafetyAttributes"],d);const c=i(n,["includeRaiReason"]);e!==void 0&&c!=null&&s(e,["parameters","includeRaiReason"],c);const f=i(n,["language"]);e!==void 0&&f!=null&&s(e,["parameters","language"],f);const p=i(n,["outputMimeType"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","mimeType"],p);const m=i(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m),i(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const g=i(n,["imageSize"]);if(e!==void 0&&g!=null&&s(e,["parameters","sampleImageSize"],g),i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function ja(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&s(t,["config"],Oa(l,t)),t}function eu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function nu(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=i(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],qt(n,u)),o}function tu(n,e){const t={},o=i(e,["config"]);return o!=null&&s(t,["config"],nu(n,o,t)),t}function ou(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function iu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],ou(r,t)),t}function su(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function ru(n){const e={};if(i(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function lu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);if(r!=null){let a=H(r);Array.isArray(a)&&(a=a.map(u=>Ne(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["config"],ru(l)),t}function no(n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=i(n,["imageBytes"]);t!=null&&s(e,["bytesBase64Encoded"],ee(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function au(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);if(e!==void 0&&r!=null&&s(e,["instances[0]","image"],no(r)),i(n,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return t}function uu(n,e){const t={},o=i(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o),i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=i(n,["durationSeconds"]);if(e!==void 0&&r!=null&&s(e,["parameters","durationSeconds"],r),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(n,["aspectRatio"]);e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l);const a=i(n,["resolution"]);e!==void 0&&a!=null&&s(e,["parameters","resolution"],a);const u=i(n,["personGeneration"]);if(e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u),i(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=i(n,["negativePrompt"]);e!==void 0&&d!=null&&s(e,["parameters","negativePrompt"],d);const c=i(n,["enhancePrompt"]);if(e!==void 0&&c!=null&&s(e,["parameters","enhancePrompt"],c),i(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(i(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(i(n,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(i(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(i(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function cu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);if(l!=null&&s(t,["instances[0]","image"],no(l)),i(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=i(e,["source"]);a!=null&&s(t,["config"],au(a,t));const u=i(e,["config"]);return u!=null&&s(t,["config"],uu(u,t)),t}function du(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function fu(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function pu(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function mu(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function gu(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],du(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],fu(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],pu(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],mu(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=i(n,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function fe(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>gu(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function hu(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const u=i(n,["format"]);u!=null&&s(e,["format"],u);const d=i(n,["items"]);d!=null&&s(e,["items"],d);const c=i(n,["maxItems"]);c!=null&&s(e,["maxItems"],c);const f=i(n,["maxLength"]);f!=null&&s(e,["maxLength"],f);const p=i(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=i(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const C=i(n,["minimum"]);C!=null&&s(e,["minimum"],C);const S=i(n,["nullable"]);S!=null&&s(e,["nullable"],S);const v=i(n,["pattern"]);v!=null&&s(e,["pattern"],v);const E=i(n,["properties"]);E!=null&&s(e,["properties"],E);const A=i(n,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const I=i(n,["required"]);I!=null&&s(e,["required"],I);const N=i(n,["title"]);N!=null&&s(e,["title"],N);const w=i(n,["type"]);return w!=null&&s(e,["type"],w),e}function yu(n){const e={},t=i(n,["featureSelectionPreference"]);return t!=null&&s(e,["featureSelectionPreference"],t),e}function Tu(n){const e={},t=i(n,["method"]);t!=null&&s(e,["method"],t);const o=i(n,["category"]);o!=null&&s(e,["category"],o);const r=i(n,["threshold"]);return r!=null&&s(e,["threshold"],r),e}function Cu(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function vu(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Eu(n){const e={},t=i(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],vu(t));const o=i(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function Su(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function _u(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Su(t)),e}function Iu(n){const e={},t=i(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function Au(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function Mu(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],Au(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(n,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function Ru(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],Mu(t)),e}function Pu(){return{}}function xu(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function to(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>Cu(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],Eu(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],_u(l));const a=i(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],Iu(a));const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],Ru(u)),i(n,["urlContext"])!=null&&s(e,["urlContext"],Pu());const c=i(n,["computerUse"]);c!=null&&s(e,["computerUse"],xu(c));const f=i(n,["codeExecution"]);return f!=null&&s(e,["codeExecution"],f),e}function Nu(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function wu(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Du(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],wu(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function ku(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Nu(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Du(o)),e}function Lu(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Uu(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Lu(t)),e}function Fu(n){const e={},t=i(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],Uu(t)),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Vu(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function qu(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],fe(V(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&s(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&s(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&s(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const y=i(e,["seed"]);y!=null&&s(o,["seed"],y);const C=i(e,["responseMimeType"]);C!=null&&s(o,["responseMimeType"],C);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],hu(Qe(S)));const v=i(e,["responseJsonSchema"]);v!=null&&s(o,["responseJsonSchema"],v);const E=i(e,["routingConfig"]);E!=null&&s(o,["routingConfig"],E);const A=i(e,["modelSelectionConfig"]);A!=null&&s(o,["modelConfig"],yu(A));const I=i(e,["safetySettings"]);if(t!==void 0&&I!=null){let K=I;Array.isArray(K)&&(K=K.map(Le=>Tu(Le))),s(t,["safetySettings"],K)}const N=i(e,["tools"]);if(t!==void 0&&N!=null){let K=ce(N);Array.isArray(K)&&(K=K.map(Le=>to(ue(Le)))),s(t,["tools"],K)}const w=i(e,["toolConfig"]);t!==void 0&&w!=null&&s(t,["toolConfig"],ku(w));const F=i(e,["labels"]);t!==void 0&&F!=null&&s(t,["labels"],F);const M=i(e,["cachedContent"]);t!==void 0&&M!=null&&s(t,["cachedContent"],Q(n,M));const k=i(e,["responseModalities"]);k!=null&&s(o,["responseModalities"],k);const D=i(e,["mediaResolution"]);D!=null&&s(o,["mediaResolution"],D);const J=i(e,["speechConfig"]);J!=null&&s(o,["speechConfig"],Fu(Ze(J)));const sn=i(e,["audioTimestamp"]);sn!=null&&s(o,["audioTimestamp"],sn);const rn=i(e,["thinkingConfig"]);return rn!=null&&s(o,["thinkingConfig"],Vu(rn)),o}function Tt(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);if(r!=null){let a=H(r);Array.isArray(a)&&(a=a.map(u=>fe(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],qu(n,l,t)),t}function Gu(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["instances[]","task_type"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["instances[]","title"],r);const l=i(n,["outputDimensionality"]);e!==void 0&&l!=null&&s(e,["parameters","outputDimensionality"],l);const a=i(n,["mimeType"]);e!==void 0&&a!=null&&s(e,["instances[]","mimeType"],a);const u=i(n,["autoTruncate"]);return e!==void 0&&u!=null&&s(e,["parameters","autoTruncate"],u),t}function Hu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);r!=null&&s(t,["instances[]","content"],Xe(n,r));const l=i(e,["config"]);return l!=null&&s(t,["config"],Gu(l,t)),t}function $u(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(n,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const d=i(n,["seed"]);e!==void 0&&d!=null&&s(e,["parameters","seed"],d);const c=i(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&s(e,["parameters","safetySetting"],c);const f=i(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const p=i(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=i(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=i(n,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const y=i(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y);const C=i(n,["addWatermark"]);e!==void 0&&C!=null&&s(e,["parameters","addWatermark"],C);const S=i(n,["imageSize"]);e!==void 0&&S!=null&&s(e,["parameters","sampleImageSize"],S);const v=i(n,["enhancePrompt"]);return e!==void 0&&v!=null&&s(e,["parameters","enhancePrompt"],v),t}function Bu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&s(t,["config"],$u(l,t)),t}function B(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["imageBytes"]);o!=null&&s(e,["bytesBase64Encoded"],ee(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ju(n){const e={},t=i(n,["maskMode"]);t!=null&&s(e,["maskMode"],t);const o=i(n,["segmentationClasses"]);o!=null&&s(e,["maskClasses"],o);const r=i(n,["maskDilation"]);return r!=null&&s(e,["dilation"],r),e}function Yu(n){const e={},t=i(n,["controlType"]);t!=null&&s(e,["controlType"],t);const o=i(n,["enableControlImageComputation"]);return o!=null&&s(e,["computeControl"],o),e}function Wu(n){const e={},t=i(n,["styleDescription"]);return t!=null&&s(e,["styleDescription"],t),e}function Ku(n){const e={},t=i(n,["subjectType"]);t!=null&&s(e,["subjectType"],t);const o=i(n,["subjectDescription"]);return o!=null&&s(e,["subjectDescription"],o),e}function bu(n){const e={},t=i(n,["referenceImage"]);t!=null&&s(e,["referenceImage"],B(t));const o=i(n,["referenceId"]);o!=null&&s(e,["referenceId"],o);const r=i(n,["referenceType"]);r!=null&&s(e,["referenceType"],r);const l=i(n,["maskImageConfig"]);l!=null&&s(e,["maskImageConfig"],Ju(l));const a=i(n,["controlImageConfig"]);a!=null&&s(e,["controlImageConfig"],Yu(a));const u=i(n,["styleImageConfig"]);u!=null&&s(e,["styleImageConfig"],Wu(u));const d=i(n,["subjectImageConfig"]);return d!=null&&s(e,["subjectImageConfig"],Ku(d)),e}function zu(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(n,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const d=i(n,["seed"]);e!==void 0&&d!=null&&s(e,["parameters","seed"],d);const c=i(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&s(e,["parameters","safetySetting"],c);const f=i(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const p=i(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=i(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=i(n,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const y=i(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y);const C=i(n,["addWatermark"]);e!==void 0&&C!=null&&s(e,["parameters","addWatermark"],C);const S=i(n,["editMode"]);e!==void 0&&S!=null&&s(e,["parameters","editMode"],S);const v=i(n,["baseSteps"]);return e!==void 0&&v!=null&&s(e,["parameters","editConfig","baseSteps"],v),t}function Xu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>bu(d))),s(t,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&s(t,["config"],zu(a,t)),t}function Qu(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["includeRaiReason"]);e!==void 0&&r!=null&&s(e,["parameters","includeRaiReason"],r);const l=i(n,["outputMimeType"]);e!==void 0&&l!=null&&s(e,["parameters","outputOptions","mimeType"],l);const a=i(n,["outputCompressionQuality"]);e!==void 0&&a!=null&&s(e,["parameters","outputOptions","compressionQuality"],a);const u=i(n,["enhanceInputImage"]);e!==void 0&&u!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],u);const d=i(n,["imagePreservationFactor"]);e!==void 0&&d!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const c=i(n,["numberOfImages"]);e!==void 0&&c!=null&&s(e,["parameters","sampleCount"],c);const f=i(n,["mode"]);return e!==void 0&&f!=null&&s(e,["parameters","mode"],f),t}function Zu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["image"]);r!=null&&s(t,["instances[0]","image"],B(r));const l=i(e,["upscaleFactor"]);l!=null&&s(t,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&s(t,["config"],Qu(a,t)),t}function Ou(n){const e={},t=i(n,["productImage"]);return t!=null&&s(e,["image"],B(t)),e}function ju(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["personImage"]);e!==void 0&&r!=null&&s(e,["instances[0]","personImage","image"],B(r));const l=i(n,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>Ou(u))),s(e,["instances[0]","productImages"],a)}return t}function ec(n,e){const t={},o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["baseSteps"]);e!==void 0&&r!=null&&s(e,["parameters","editConfig","baseSteps"],r);const l=i(n,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const a=i(n,["seed"]);e!==void 0&&a!=null&&s(e,["parameters","seed"],a);const u=i(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const d=i(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const c=i(n,["addWatermark"]);e!==void 0&&c!=null&&s(e,["parameters","addWatermark"],c);const f=i(n,["outputMimeType"]);e!==void 0&&f!=null&&s(e,["parameters","outputOptions","mimeType"],f);const p=i(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","compressionQuality"],p);const m=i(n,["enhancePrompt"]);return e!==void 0&&m!=null&&s(e,["parameters","enhancePrompt"],m),t}function nc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["source"]);r!=null&&s(t,["config"],ju(r,t));const l=i(e,["config"]);return l!=null&&s(t,["config"],ec(l,t)),t}function tc(n){const e={},t=i(n,["image"]);return t!=null&&s(e,["image"],B(t)),e}function oc(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],B(r));const l=i(n,["scribbleImage"]);return e!==void 0&&l!=null&&s(e,["instances[0]","scribble"],tc(l)),t}function ic(n,e){const t={},o=i(n,["mode"]);e!==void 0&&o!=null&&s(e,["parameters","mode"],o);const r=i(n,["maxPredictions"]);e!==void 0&&r!=null&&s(e,["parameters","maxPredictions"],r);const l=i(n,["confidenceThreshold"]);e!==void 0&&l!=null&&s(e,["parameters","confidenceThreshold"],l);const a=i(n,["maskDilation"]);e!==void 0&&a!=null&&s(e,["parameters","maskDilation"],a);const u=i(n,["binaryColorThreshold"]);return e!==void 0&&u!=null&&s(e,["parameters","binaryColorThreshold"],u),t}function sc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["source"]);r!=null&&s(t,["config"],oc(r,t));const l=i(e,["config"]);return l!=null&&s(t,["config"],ic(l,t)),t}function rc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function lc(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=i(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],qt(n,u)),o}function ac(n,e){const t={},o=i(e,["config"]);return o!=null&&s(t,["config"],lc(n,o,t)),t}function uc(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function cc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],uc(r,t)),t}function dc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function fc(n,e){const t={},o=i(n,["systemInstruction"]);e!==void 0&&o!=null&&s(e,["systemInstruction"],fe(V(o)));const r=i(n,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>to(u))),s(e,["tools"],a)}const l=i(n,["generationConfig"]);return e!==void 0&&l!=null&&s(e,["generationConfig"],l),t}function pc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);if(r!=null){let a=H(r);Array.isArray(a)&&(a=a.map(u=>fe(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["config"],fc(l,t)),t}function mc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);if(r!=null){let a=H(r);Array.isArray(a)&&(a=a.map(u=>fe(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["config"],l),t}function oo(n){const e={},t=i(n,["uri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["videoBytes"]);o!=null&&s(e,["bytesBase64Encoded"],ee(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function gc(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],B(r));const l=i(n,["video"]);return e!==void 0&&l!=null&&s(e,["instances[0]","video"],oo(l)),t}function hc(n){const e={},t=i(n,["image"]);t!=null&&s(e,["image"],B(t));const o=i(n,["referenceType"]);return o!=null&&s(e,["referenceType"],o),e}function yc(n){const e={},t=i(n,["image"]);t!=null&&s(e,["_self"],B(t));const o=i(n,["maskMode"]);return o!=null&&s(e,["maskMode"],o),e}function Tc(n,e){const t={},o=i(n,["numberOfVideos"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["outputGcsUri"]);e!==void 0&&r!=null&&s(e,["parameters","storageUri"],r);const l=i(n,["fps"]);e!==void 0&&l!=null&&s(e,["parameters","fps"],l);const a=i(n,["durationSeconds"]);e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a);const u=i(n,["seed"]);e!==void 0&&u!=null&&s(e,["parameters","seed"],u);const d=i(n,["aspectRatio"]);e!==void 0&&d!=null&&s(e,["parameters","aspectRatio"],d);const c=i(n,["resolution"]);e!==void 0&&c!=null&&s(e,["parameters","resolution"],c);const f=i(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const p=i(n,["pubsubTopic"]);e!==void 0&&p!=null&&s(e,["parameters","pubsubTopic"],p);const m=i(n,["negativePrompt"]);e!==void 0&&m!=null&&s(e,["parameters","negativePrompt"],m);const g=i(n,["enhancePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","enhancePrompt"],g);const h=i(n,["generateAudio"]);e!==void 0&&h!=null&&s(e,["parameters","generateAudio"],h);const y=i(n,["lastFrame"]);e!==void 0&&y!=null&&s(e,["instances[0]","lastFrame"],B(y));const C=i(n,["referenceImages"]);if(e!==void 0&&C!=null){let E=C;Array.isArray(E)&&(E=E.map(A=>hc(A))),s(e,["instances[0]","referenceImages"],E)}const S=i(n,["mask"]);e!==void 0&&S!=null&&s(e,["instances[0]","mask"],yc(S));const v=i(n,["compressionQuality"]);return e!==void 0&&v!=null&&s(e,["parameters","compressionQuality"],v),t}function Cc(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);l!=null&&s(t,["instances[0]","image"],B(l));const a=i(e,["video"]);a!=null&&s(t,["instances[0]","video"],oo(a));const u=i(e,["source"]);u!=null&&s(t,["config"],gc(u,t));const d=i(e,["config"]);return d!=null&&s(t,["config"],Tc(d,t)),t}function vc(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ec(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Sc(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function _c(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Ic(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],vc(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Ec(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Sc(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],_c(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=i(n,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Ac(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Ic(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Mc(n){const e={},t=i(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function Rc(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Pc(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Rc(r))),s(e,["urlMetadata"],o)}return e}function xc(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],Ac(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Mc(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Pc(a));const u=i(n,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const d=i(n,["groundingMetadata"]);d!=null&&s(e,["groundingMetadata"],d);const c=i(n,["index"]);c!=null&&s(e,["index"],c);const f=i(n,["logprobsResult"]);f!=null&&s(e,["logprobsResult"],f);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Ct(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>xc(c))),s(e,["candidates"],d)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function Nc(n){const e={},t=i(n,["values"]);return t!=null&&s(e,["values"],t),e}function wc(){return{}}function Dc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Nc(a))),s(e,["embeddings"],l)}return i(n,["metadata"])!=null&&s(e,["metadata"],wc()),e}function kc(n){const e={},t=i(n,["bytesBase64Encoded"]);t!=null&&s(e,["imageBytes"],ee(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function io(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function Lc(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],kc(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);return r!=null&&s(e,["safetyAttributes"],io(r)),e}function Uc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Lc(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],io(r)),e}function Fc(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Ye(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["version"]);l!=null&&s(e,["version"],l);const a=i(n,["_self"]);a!=null&&s(e,["tunedModelInfo"],Fc(a));const u=i(n,["inputTokenLimit"]);u!=null&&s(e,["inputTokenLimit"],u);const d=i(n,["outputTokenLimit"]);d!=null&&s(e,["outputTokenLimit"],d);const c=i(n,["supportedGenerationMethods"]);return c!=null&&s(e,["supportedActions"],c),e}function Vc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=Gt(r);Array.isArray(l)&&(l=l.map(a=>Ye(a))),s(e,["models"],l)}return e}function qc(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Gc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);o!=null&&s(e,["totalTokens"],o);const r=i(n,["cachedContentTokenCount"]);return r!=null&&s(e,["cachedContentTokenCount"],r),e}function Hc(n){const e={},t=i(n,["video","uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],ee(o));const r=i(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function $c(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Hc(t)),e}function Bc(n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>$c(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Jc(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],Bc(a)),e}function Yc(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Wc(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Kc(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function bc(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function zc(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Yc(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Wc(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Kc(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],bc(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=i(n,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Xc(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>zc(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Qc(n){const e={},t=i(n,["citations"]);return t!=null&&s(e,["citations"],t),e}function Zc(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Oc(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Zc(r))),s(e,["urlMetadata"],o)}return e}function jc(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],Xc(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Qc(o));const r=i(n,["finishMessage"]);r!=null&&s(e,["finishMessage"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Oc(a));const u=i(n,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const d=i(n,["groundingMetadata"]);d!=null&&s(e,["groundingMetadata"],d);const c=i(n,["index"]);c!=null&&s(e,["index"],c);const f=i(n,["logprobsResult"]);f!=null&&s(e,["logprobsResult"],f);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function vt(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>jc(f))),s(e,["candidates"],c)}const r=i(n,["createTime"]);r!=null&&s(e,["createTime"],r);const l=i(n,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const a=i(n,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);const u=i(n,["responseId"]);u!=null&&s(e,["responseId"],u);const d=i(n,["usageMetadata"]);return d!=null&&s(e,["usageMetadata"],d),e}function ed(n){const e={},t=i(n,["truncated"]);t!=null&&s(e,["truncated"],t);const o=i(n,["token_count"]);return o!=null&&s(e,["tokenCount"],o),e}function nd(n){const e={},t=i(n,["values"]);t!=null&&s(e,["values"],t);const o=i(n,["statistics"]);return o!=null&&s(e,["statistics"],ed(o)),e}function td(n){const e={},t=i(n,["billableCharacterCount"]);return t!=null&&s(e,["billableCharacterCount"],t),e}function od(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>nd(a))),s(e,["embeddings"],l)}const r=i(n,["metadata"]);return r!=null&&s(e,["metadata"],td(r)),e}function so(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["imageBytes"],ee(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ro(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function we(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],so(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);r!=null&&s(e,["safetyAttributes"],ro(r));const l=i(n,["prompt"]);return l!=null&&s(e,["enhancedPrompt"],l),e}function id(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>we(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],ro(r)),e}function sd(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>we(l))),s(e,["generatedImages"],r)}return e}function rd(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>we(l))),s(e,["generatedImages"],r)}return e}function ld(n){const e={},t=i(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>we(r))),s(e,["generatedImages"],o)}return e}function ad(n){const e={},t=i(n,["label"]);t!=null&&s(e,["label"],t);const o=i(n,["score"]);return o!=null&&s(e,["score"],o),e}function ud(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["mask"],so(t));const o=i(n,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ad(l))),s(e,["labels"],r)}return e}function cd(n){const e={},t=i(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ud(r))),s(e,["generatedMasks"],o)}return e}function dd(n){const e={},t=i(n,["endpoint"]);t!=null&&s(e,["name"],t);const o=i(n,["deployedModelId"]);return o!=null&&s(e,["deployedModelId"],o),e}function fd(n){const e={},t=i(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function pd(n){const e={},t=i(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const o=i(n,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(n,["step"]);return r!=null&&s(e,["step"],r),e}function We(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["versionId"]);l!=null&&s(e,["version"],l);const a=i(n,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>dd(m))),s(e,["endpoints"],p)}const u=i(n,["labels"]);u!=null&&s(e,["labels"],u);const d=i(n,["_self"]);d!=null&&s(e,["tunedModelInfo"],fd(d));const c=i(n,["defaultCheckpointId"]);c!=null&&s(e,["defaultCheckpointId"],c);const f=i(n,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>pd(m))),s(e,["checkpoints"],p)}return e}function md(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=Gt(r);Array.isArray(l)&&(l=l.map(a=>We(a))),s(e,["models"],l)}return e}function gd(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function hd(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);return o!=null&&s(e,["totalTokens"],o),e}function yd(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["tokensInfo"]);return o!=null&&s(e,["tokensInfo"],o),e}function Td(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],ee(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Cd(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Td(t)),e}function vd(n){const e={},t=i(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Cd(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Ed(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],vd(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sd="Content-Type",_d="X-Server-Timeout",Id="User-Agent",Ke="x-goog-api-client",Ad="1.20.0",Md=`google-genai-sdk/${Ad}`,Rd="v1beta1",Pd="v1beta",Et=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class xd{constructor(e){var t,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Rd,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Pd,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const r=[this.getRequestUrlInternal(t)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o){if(t&&t.timeout||o){const r=new AbortController,l=r.signal;if(t.timeout&&t?.timeout>0){const a=setTimeout(()=>r.abort(),t.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),e.signal=l}return t&&t.extraBody!==null&&Nd(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await St(r),new Ge(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await St(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return se(this,arguments,function*(){const r=(t=e?.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:d}=yield L(r.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=l.decode(d,{stream:!0});try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,h=m.code,y=`got status: ${g}. ${JSON.stringify(p)}`;if(h>=400&&h<600)throw new xe({message:y,status:h})}}catch(p){if(p.name==="ApiError")throw p}a+=c;let f=a.match(Et);for(;f;){const p=f[1];try{const m=new Response(p,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield L(new Ge(m)),a=a.slice(f[0].length),f=a.match(Et)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=Md+" "+this.clientOptions.userAgentExtra;return e[Id]=t,e[Ke]=t,e[Sd]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[o,r]of Object.entries(e.headers))t.append(o,r);e.timeout&&e.timeout>0&&t.append(_d,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var o;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);r.sizeBytes=String(a.size);const u=(o=t?.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const d=await this.fetchUploadUrl(r,t);return l.upload(e,d,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var o;let r={};t?.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=await this.request({path:T("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!a||!a?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(o=a?.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function St(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw t>=400&&t<600?new xe({message:r,status:t}):new Error(r)}}function Nd(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const u=Object.assign({},l);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const c=a[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const r=o(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wd="mcp_used/unknown";let Dd=!1;function lo(n){for(const e of n)if(kd(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Dd}function ao(n){var e;const t=(e=n[Ke])!==null&&e!==void 0?e:"";n[Ke]=(t+` ${wd}`).trimStart()}function kd(n){return n!==null&&typeof n=="object"&&n instanceof en}function Ld(n,e=100){return se(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield L(n.listTools({cursor:o}));for(const a of l.tools)yield yield L(a),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class en{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new en(e,t)}async initialize(){var e,t,o,r;if(this.mcpTools.length>0)return;const l={},a=[];for(const f of this.mcpClients)try{for(var u=!0,d=(t=void 0,ge(Ld(f))),c;c=await d.next(),e=c.done,!e;u=!0){r=c.value,u=!1;const p=r;a.push(p);const m=p.name;if(l[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);l[m]=f}}catch(p){t={error:p}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Xo(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await r.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Ud(n,e,t){const o=new $o;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data);const l=da(r);Object.assign(o,l),e(o)}class Fd{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=Gd(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(E=>{c=E}),p=e.callbacks,m=function(){c({})},g=this.apiClient,h={onopen:m,onmessage:E=>{Ud(g,p.onmessage,E)},onerror:(t=p?.onerror)!==null&&t!==void 0?t:function(E){},onclose:(o=p?.onclose)!==null&&o!==void 0?o:function(E){}},y=this.webSocketFactory.create(d,qd(a),h);y.connect(),await f;const C=x(this.apiClient,e.model),S=Qt({model:C}),v=Je({setup:S});return y.send(JSON.stringify(v)),new Vd(y,this.apiClient)}}class Vd{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=al(e),o=Zt(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=ul(e),o=Je(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const t=Je({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(oe.PLAY)}pause(){this.sendPlaybackControl(oe.PAUSE)}stop(){this.sendPlaybackControl(oe.STOP)}resetContext(){this.sendPlaybackControl(oe.RESET_CONTEXT)}close(){this.conn.close()}}function qd(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function Gd(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hd="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function $d(n,e,t){const o=new Ho;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const a=Ia(l);Object.assign(o,a)}else{const a=ta(l);Object.assign(o,a)}e(o)}class Bd{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new Fd(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,r,l,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&lo(e.config.tools)&&ao(p);const m=Kd(p);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const M=this.apiClient.getApiKey();let k="BidiGenerateContent",D="key";M?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",D="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${k}?${D}=${M}`}let g=()=>{};const h=new Promise(M=>{g=M}),y=e.callbacks,C=function(){var M;(M=y?.onopen)===null||M===void 0||M.call(y),g({})},S=this.apiClient,v={onopen:C,onmessage:M=>{$d(S,y.onmessage,M)},onerror:(t=y?.onerror)!==null&&t!==void 0?t:function(M){},onclose:(o=y?.onclose)!==null&&o!==void 0?o:function(M){}},E=this.webSocketFactory.create(f,Wd(m),v);E.connect(),await h;let A=x(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const M=this.apiClient.getProject(),k=this.apiClient.getLocation();A=`projects/${M}/locations/${k}/`+A}let I={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Me.AUDIO]}:e.config.responseModalities=[Me.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const N=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],w=[];for(const M of N)if(this.isCallableTool(M)){const k=M;w.push(await k.tool())}else w.push(M);w.length>0&&(e.config.tools=w);const F={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?I=ql(this.apiClient,F):I=il(this.apiClient,F),delete I.config,E.send(JSON.stringify(I)),new Yd(E,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Jd={turnComplete:!0};class Yd{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=H(t.turns),e.isVertexAI()?o=o.map(r=>fe(r)):o=o.map(r=>Ne(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Hd)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Jd),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:$l(e)}:t={realtimeInput:ll(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Wd(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function Kd(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _t=10;function It(n){var e,t,o;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(t=n?.tools)!==null&&t!==void 0?t:[])if(re(a)){r=!0;break}if(!r)return!0;const l=(o=n?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function re(n){return"callTool"in n&&typeof n.callTool=="function"}function bd(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>re(r)))!==null&&o!==void 0?o:!1}function zd(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!re(r)))!==null&&o!==void 0?o:!1}function At(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xd extends j{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,r,l,a,u;const d=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!bd(t)||It(t.config))return await this.generateContentInternal(d);if(zd(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,f;const p=H(d.contents),m=(l=(r=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:_t;let g=0;for(;g<m&&(c=await this.generateContentInternal(d),!(!c.functionCalls||c.functionCalls.length===0));){const h=c.candidates[0].content,y=[];for(const C of(u=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(re(C)){const v=await C.callTool(c.functionCalls);y.push(...v)}g++,f={role:"user",parts:y},d.contents=H(d.contents),d.contents.push(h),d.contents.push(f),At(d.config)&&(p.push(h),p.push(f))}return At(d.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),It(t.config)){const o=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var r;let l;const a=[];if(o?.generatedImages)for(const d of o.generatedImages)d&&d?.safetyAttributes&&((r=d?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=d?.safetyAttributes:a.push(d);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async t=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new ve(O.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const a=await Promise.all(l.map(async d=>re(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&lo(e.config.tools)){const d=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),ao(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var t,o,r;const l=new Map;for(const a of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(re(a)){const u=a,d=await u.tool();for(const c of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(l.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);l.set(c.name,u)}}return l}async processAfcStream(e){var t,o,r;const l=(r=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:_t;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return(function(c,f,p){var m,g;return se(this,arguments,function*(){for(var h,y,C,S;u<l;){a&&(u++,a=!1);const I=yield L(c.processParamsMaybeAddMcpUsage(p)),N=yield L(c.generateContentStreamInternal(I)),w=[],F=[];try{for(var v=!0,E=(y=void 0,ge(N)),A;A=yield L(E.next()),h=A.done,!h;v=!0){S=A.value,v=!1;const M=S;if(yield yield L(M),M.candidates&&(!((m=M.candidates[0])===null||m===void 0)&&m.content)){F.push(M.candidates[0].content);for(const k of(g=M.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(u<l&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(k.functionCall.name)){const D=yield L(f.get(k.functionCall.name).callTool([k.functionCall]));w.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(M){y={error:M}}finally{try{!v&&!h&&(C=E.return)&&(yield L(C.call(E)))}finally{if(y)throw y.error}}if(w.length>0){a=!0;const M=new pe;M.candidates=[{content:{role:"user",parts:w}}],yield yield L(M);const k=[];k.push(...F),k.push({role:"user",parts:w});const D=H(p.contents).concat(k);p.contents=D}else break}})})(this,d,e)}async generateContentInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Tt(this.apiClient,e);return u=T("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=vt(f),m=new pe;return Object.assign(m,p),m})}else{const c=yt(this.apiClient,e);return u=T("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Ct(f),m=new pe;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Tt(this.apiClient,e);return u=T("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return se(this,arguments,function*(){var m,g,h,y;try{for(var C=!0,S=ge(p),v;v=yield L(S.next()),m=v.done,!m;C=!0){y=v.value,C=!1;const E=y,A=vt(yield L(E.json()));A.sdkHttpResponse={headers:E.headers};const I=new pe;Object.assign(I,A),yield yield L(I)}}catch(E){g={error:E}}finally{try{!C&&!m&&(h=S.return)&&(yield L(h.call(S)))}finally{if(g)throw g.error}}})})}else{const c=yt(this.apiClient,e);return u=T("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return se(this,arguments,function*(){var m,g,h,y;try{for(var C=!0,S=ge(p),v;v=yield L(S.next()),m=v.done,!m;C=!0){y=v.value,C=!1;const E=y,A=Ct(yield L(E.json()));A.sdkHttpResponse={headers:E.headers};const I=new pe;Object.assign(I,A),yield yield L(I)}}catch(E){g={error:E}}finally{try{!C&&!m&&(h=S.return)&&(yield L(h.call(S)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Hu(this.apiClient,e);return u=T("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=od(f),m=new Zn;return Object.assign(m,p),m})}else{const c=Za(this.apiClient,e);return u=T("{model}:batchEmbedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Dc(f),m=new Zn;return Object.assign(m,p),m})}}async generateImagesInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Bu(this.apiClient,e);return u=T("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=id(f),m=new On;return Object.assign(m,p),m})}else{const c=ja(this.apiClient,e);return u=T("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Uc(f),m=new On;return Object.assign(m,p),m})}}async editImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Xu(this.apiClient,e);return l=T("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=sd(d),f=new Do;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Zu(this.apiClient,e);return l=T("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=rd(d),f=new ko;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=nc(this.apiClient,e);return l=T("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=ld(d),f=new Lo;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=sc(this.apiClient,e);return l=T("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=cd(d),f=new Uo;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=rc(this.apiClient,e);return u=T("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>We(f))}else{const c=eu(this.apiClient,e);return u=T("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Ye(f))}}async listInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ac(this.apiClient,e);return u=T("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=md(f),m=new jn;return Object.assign(m,p),m})}else{const c=tu(this.apiClient,e);return u=T("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Vc(f),m=new jn;return Object.assign(m,p),m})}}async update(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=cc(this.apiClient,e);return u=T("{model}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>We(f))}else{const c=iu(this.apiClient,e);return u=T("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Ye(f))}}async delete(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=dc(this.apiClient,e);return u=T("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=gd(f),m=new et;return Object.assign(m,p),m})}else{const c=su(this.apiClient,e);return u=T("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=qc(f),m=new et;return Object.assign(m,p),m})}}async countTokens(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=pc(this.apiClient,e);return u=T("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=hd(f),m=new nt;return Object.assign(m,p),m})}else{const c=lu(this.apiClient,e);return u=T("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Gc(f),m=new nt;return Object.assign(m,p),m})}}async computeTokens(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=mc(this.apiClient,e);return l=T("{model}:computeTokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=yd(d),f=new Fo;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Cc(this.apiClient,e);return u=T("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Ed(f),m=new Re;return Object.assign(m,p),m})}else{const c=cu(this.apiClient,e);return u=T("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Jc(f),m=new Re;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qd extends j{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=_o(e);return u=T("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a}else{const c=Eo(e);return u=T("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=So(e);return l=T("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zd(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function uo(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Zd(t)),e}function Od(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],uo(o)),e}function jd(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Od(r))),s(e,["speakerVoiceConfigs"],o)}return e}function ef(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],uo(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],jd(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function nf(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function tf(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function of(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function sf(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function rf(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],nf(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],tf(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],of(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],sf(u));const d=i(n,["codeExecutionResult"]);d!=null&&s(e,["codeExecutionResult"],d);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const f=i(n,["functionResponse"]);f!=null&&s(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function lf(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>rf(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function af(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const d=i(n,["responseJsonSchema"]);return d!=null&&s(e,["responseJsonSchema"],d),e}function uf(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function cf(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],uf(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function df(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function ff(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],df(t)),e}function pf(){return{}}function mf(n){const e={},t=i(n,["environment"]);return t!=null&&s(e,["environment"],t),e}function gf(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(c=>af(c))),s(e,["functionDeclarations"],d)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],cf(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],ff(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],pf());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],mf(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function hf(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Mt(){return{}}function yf(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Tf(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],yf(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function Cf(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function vf(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],Cf(o)),e}function Ef(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function Sf(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const d=i(n,["maxOutputTokens"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(n,["mediaResolution"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","mediaResolution"],c);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","seed"],f);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],ef(Oe(p)));const m=i(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],lf(V(g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let I=ce(h);Array.isArray(I)&&(I=I.map(N=>gf(ue(N)))),s(e,["setup","tools"],I)}const y=i(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],hf(y));const C=i(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&s(e,["setup","inputAudioTranscription"],Mt());const S=i(n,["outputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","outputAudioTranscription"],Mt());const v=i(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],Tf(v));const E=i(n,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],vf(E));const A=i(n,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],Ef(A)),t}function _f(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Sf(r,t)),t}function If(n,e,t){const o={},r=i(e,["expireTime"]);t!==void 0&&r!=null&&s(t,["expireTime"],r);const l=i(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&s(t,["newSessionExpireTime"],l);const a=i(e,["uses"]);t!==void 0&&a!=null&&s(t,["uses"],a);const u=i(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&s(t,["bidiGenerateContentSetup"],_f(n,u));const d=i(e,["lockAdditionalFields"]);return t!==void 0&&d!=null&&s(t,["fieldMask"],d),o}function Af(n,e){const t={},o=i(e,["config"]);return o!=null&&s(t,["config"],If(n,o,t)),t}function Mf(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rf(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function Pf(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=Rf(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?n.fieldMask=l:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(c=>a.includes(c)?`generationConfig.${c}`:c));const d=[];l&&d.push(l),u.length>0&&d.push(...u),d.length>0?n.fieldMask=d.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class xf extends j{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Af(this.apiClient,e);l=T("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=Pf(u,e.config);return r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>Mf(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nf(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function wf(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function Df(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],wf(t,e)),e}function kf(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Lf(n){const e={},t=i(n,["textInput"]);t!=null&&s(e,["textInput"],t);const o=i(n,["output"]);return o!=null&&s(e,["output"],o),e}function Uf(n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=i(n,["examples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Lf(r))),s(e,["examples","examples"],o)}return e}function Ff(n,e){const t={};if(i(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=i(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&s(e,["displayName"],o),i(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=i(n,["epochCount"]);e!==void 0&&r!=null&&s(e,["tuningTask","hyperparameters","epochCount"],r);const l=i(n,["learningRateMultiplier"]);if(l!=null&&s(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),i(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=i(n,["batchSize"]);e!==void 0&&a!=null&&s(e,["tuningTask","hyperparameters","batchSize"],a);const u=i(n,["learningRate"]);if(e!==void 0&&u!=null&&s(e,["tuningTask","hyperparameters","learningRate"],u),i(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function Vf(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["preTunedModel"]);o!=null&&s(e,["preTunedModel"],o);const r=i(n,["trainingDataset"]);r!=null&&s(e,["tuningTask","trainingData"],Uf(r));const l=i(n,["config"]);return l!=null&&s(e,["config"],Ff(l,e)),e}function qf(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Gf(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function Hf(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Gf(t,e)),e}function $f(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function Bf(n,e){const t={},o=i(n,["gcsUri"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],o);const r=i(n,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),i(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function Jf(n,e){const t={},o=i(n,["gcsUri"]);o!=null&&s(t,["validationDatasetUri"],o);const r=i(n,["vertexDatasetResource"]);return e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),t}function Yf(n,e){const t={},o=i(n,["validationDataset"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec"],Jf(o,t));const r=i(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&s(e,["tunedModelDisplayName"],r);const l=i(n,["description"]);e!==void 0&&l!=null&&s(e,["description"],l);const a=i(n,["epochCount"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const u=i(n,["learningRateMultiplier"]);e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const d=i(n,["exportLastCheckpointOnly"]);e!==void 0&&d!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const c=i(n,["preTunedModelCheckpointId"]);c!=null&&s(t,["preTunedModel","checkpointId"],c);const f=i(n,["adapterSize"]);if(e!==void 0&&f!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),i(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=i(n,["labels"]);return e!==void 0&&p!=null&&s(e,["labels"],p),t}function Wf(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["preTunedModel"]);o!=null&&s(e,["preTunedModel"],o);const r=i(n,["trainingDataset"]);r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],Bf(r,e));const l=i(n,["config"]);return l!=null&&s(e,["config"],Yf(l,e)),e}function Kf(n){const e={},t=i(n,["name"]);t!=null&&s(e,["model"],t);const o=i(n,["name"]);return o!=null&&s(e,["endpoint"],o),e}function co(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],Ft(r));const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["tuningTask","startTime"]);a!=null&&s(e,["startTime"],a);const u=i(n,["tuningTask","completeTime"]);u!=null&&s(e,["endTime"],u);const d=i(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=i(n,["description"]);c!=null&&s(e,["description"],c);const f=i(n,["baseModel"]);f!=null&&s(e,["baseModel"],f);const p=i(n,["_self"]);p!=null&&s(e,["tunedModel"],Kf(p));const m=i(n,["customBaseModel"]);m!=null&&s(e,["customBaseModel"],m);const g=i(n,["experiment"]);g!=null&&s(e,["experiment"],g);const h=i(n,["labels"]);h!=null&&s(e,["labels"],h);const y=i(n,["outputUri"]);y!=null&&s(e,["outputUri"],y);const C=i(n,["pipelineJob"]);C!=null&&s(e,["pipelineJob"],C);const S=i(n,["serviceAccount"]);S!=null&&s(e,["serviceAccount"],S);const v=i(n,["tunedModelDisplayName"]);return v!=null&&s(e,["tunedModelDisplayName"],v),e}function bf(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["tunedModels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>co(a))),s(e,["tuningJobs"],l)}return e}function zf(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["metadata"]);r!=null&&s(e,["metadata"],r);const l=i(n,["done"]);l!=null&&s(e,["done"],l);const a=i(n,["error"]);return a!=null&&s(e,["error"],a),e}function Xf(n){const e={},t=i(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const o=i(n,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(n,["step"]);r!=null&&s(e,["step"],r);const l=i(n,["endpoint"]);return l!=null&&s(e,["endpoint"],l),e}function Qf(n){const e={},t=i(n,["model"]);t!=null&&s(e,["model"],t);const o=i(n,["endpoint"]);o!=null&&s(e,["endpoint"],o);const r=i(n,["checkpoints"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Xf(a))),s(e,["checkpoints"],l)}return e}function be(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],Ft(r));const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["startTime"]);a!=null&&s(e,["startTime"],a);const u=i(n,["endTime"]);u!=null&&s(e,["endTime"],u);const d=i(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=i(n,["error"]);c!=null&&s(e,["error"],c);const f=i(n,["description"]);f!=null&&s(e,["description"],f);const p=i(n,["baseModel"]);p!=null&&s(e,["baseModel"],p);const m=i(n,["tunedModel"]);m!=null&&s(e,["tunedModel"],Qf(m));const g=i(n,["preTunedModel"]);g!=null&&s(e,["preTunedModel"],g);const h=i(n,["supervisedTuningSpec"]);h!=null&&s(e,["supervisedTuningSpec"],h);const y=i(n,["tuningDataStats"]);y!=null&&s(e,["tuningDataStats"],y);const C=i(n,["encryptionSpec"]);C!=null&&s(e,["encryptionSpec"],C);const S=i(n,["partnerModelTuningSpec"]);S!=null&&s(e,["partnerModelTuningSpec"],S);const v=i(n,["customBaseModel"]);v!=null&&s(e,["customBaseModel"],v);const E=i(n,["experiment"]);E!=null&&s(e,["experiment"],E);const A=i(n,["labels"]);A!=null&&s(e,["labels"],A);const I=i(n,["outputUri"]);I!=null&&s(e,["outputUri"],I);const N=i(n,["pipelineJob"]);N!=null&&s(e,["pipelineJob"],N);const w=i(n,["serviceAccount"]);w!=null&&s(e,["serviceAccount"],w);const F=i(n,["tunedModelDisplayName"]);return F!=null&&s(e,["tunedModelDisplayName"],F),e}function Zf(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["tuningJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>be(a))),s(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Of extends j{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new ve(O.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel},r=Object.assign(Object.assign({},t),{preTunedModel:o});return r.baseModel=void 0,await this.tuneInternal(r)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),r=await this.tuneMldevInternal(o);let l="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?l=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(l=r.name.split("/operations/")[0]),{name:l,state:qe.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=qf(e);return u=T("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>be(f))}else{const c=Nf(e);return u=T("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>co(f))}}async listInternal(e){var t,o,r,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Hf(e);return u=T("tuningJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Zf(f),m=new tt;return Object.assign(m,p),m})}else{const c=Df(e);return u=T("tunedModels",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=bf(f),m=new tt;return Object.assign(m,p),m})}}async cancel(e){var t,o,r,l;let a="",u={};if(this.apiClient.isVertexAI()){const d=$f(e);a=T("{name}:cancel",d._url),u=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=kf(e);a=T("{name}:cancel",d._url),u=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Wf(e);return l=T("tuningJobs",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>be(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Vf(e);return l=T("tunedModels",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>zf(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jf{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ep=1024*1024*8,np=3,tp=1e3,op=2,Ve="x-goog-upload-status";async function ip(n,e,t){var o,r,l;let a=0,u=0,d=new Ge(new Response),c="upload";for(a=n.size;u<a;){const p=Math.min(ep,a-u),m=n.slice(u,u+p);u+p>=a&&(c+=", finalize");let g=0,h=tp;for(;g<np&&(d=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((o=d?.headers)===null||o===void 0)&&o[Ve]));)g++,await rp(h),h=h*op;if(u+=p,((r=d?.headers)===null||r===void 0?void 0:r[Ve])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await d?.json();if(((l=d?.headers)===null||l===void 0?void 0:l[Ve])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function sp(n){return{size:n.size,type:n.type}}function rp(n){return new Promise(e=>setTimeout(e,n))}class lp{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ip(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sp(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ap{create(e,t,o){return new up(e,t,o)}}class up{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rt="x-goog-api-key";class cp{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Rt)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Rt,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dp="gl-node/";class fp{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=vo(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new cp(this.apiKey);this.apiClient=new xd({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:dp+"web",uploader:new lp,downloader:new jf}),this.models=new Xd(this.apiClient),this.live=new Bd(this.apiClient,r,new ap),this.batches=new ds(this.apiClient),this.chats=new Cr(this.models,this.apiClient),this.caches=new hr(this.apiClient),this.files=new Dr(this.apiClient),this.operations=new Qd(this.apiClient),this.authTokens=new xf(this.apiClient),this.tunings=new Of(this.apiClient)}}var pp={};const nn=pp.API_KEY;nn||console.warn("API_KEY environment variable not set. Gemini provider will not work.");const fo=new fp({apiKey:nn}),Pt={type:U.OBJECT,properties:{asset:{type:U.STRING,description:"The asset pair, e.g., 'BTC/USD'"},action:{type:U.STRING,enum:["LONG","SHORT"],description:"The trade action"},entry:{type:U.NUMBER,description:"The suggested entry price"},target:{type:U.NUMBER,description:"The take-profit target price"},stopLoss:{type:U.NUMBER,description:"The stop-loss price"},reasoning:{type:U.STRING,description:"A brief justification for the trade"}},required:["asset","action","entry","target","stopLoss","reasoning"]},mp={type:U.OBJECT,properties:{overallSentiment:{type:U.STRING,enum:["POSITIVE","NEGATIVE","NEUTRAL"],description:"The overall sentiment of the news headlines."},keyTerms:{type:U.ARRAY,items:{type:U.STRING},description:"A list of 3-5 key terms or short phrases that contributed most to the sentiment."}},required:["overallSentiment","keyTerms"]},De=[{id:"scalper",name:"Scalper",icon:"fa-solid fa-bolt",systemInstruction:"You are an aggressive, high-frequency scalper. Your goal is to identify and execute trades based on short-term market volatility. Prioritize technical indicators like RSI, MACD on 1-minute and 5-minute charts. Provide concise, actionable directives with tight stop-losses."},{id:"swing",name:"Swing Trader",icon:"fa-solid fa-wave-square",systemInstruction:"You are a patient swing trader. Your goal is to capture gains in an asset over a period of several days to several weeks. You rely on identifying market trends using daily and 4-hour charts, support/resistance levels, and moving averages. Your reasoning should be clear and based on the medium-term trend."},{id:"degen",name:"Degen",icon:"fa-solid fa-rocket",systemInstruction:'You are a high-risk, high-reward "degen" trader. You look for explosive, meme-driven opportunities. Your analysis is based on social media sentiment, hype, and narratives. You are not afraid of high volatility and aim for moonshot trades. Justify your trades with narrative and sentiment, not just technicals.'},{id:"daytrader",name:"Day Trader",icon:"fa-solid fa-calendar-day",systemInstruction:"You are a disciplined day trader. Your focus is on capturing profits from intraday price movements. Analyze 15-minute and 1-hour charts for patterns like flags, triangles, and head-and-shoulders. Use VWAP and key intraday support/resistance levels to determine entry and exit points. Trades should be opened and closed within the same day."},{id:"investor",name:"Investor",icon:"fa-solid fa-piggy-bank",systemInstruction:"You are a long-term value investor. Your perspective spans months to years. Ignore short-term market noise and focus on fundamental analysis, macroeconomic trends, and major market cycles. Your analysis should be based on weekly and monthly charts, identifying deeply undervalued or overvalued conditions for major assets. Your reasoning should reflect a long-term thesis."},{id:"quant",name:"Quant",icon:"fa-solid fa-calculator",systemInstruction:"You are a quantitative analyst. Your decisions are purely data-driven, based on statistical models and algorithmic signals. Analyze price action using advanced indicators like Bollinger Bands, Ichimoku Cloud, and Fibonacci retracement levels. Identify statistical arbitrage opportunities and deviations from the mean. Your reasoning must be objective and based on quantitative signals, devoid of emotion or narrative."}],gp=[{id:"gemini",name:"Gemini",icon:"fa-solid fa-star-of-life"},{id:"ollama",name:"Ollama",icon:"fa-solid fa-server"}],tn=["Fed hints at potential rate cuts later this year, market reacts positively.","Major exchange experiences downtime, causing temporary BTC price dip.","New institutional adoption of Bitcoin ETF continues to drive demand.","Whale activity spotted moving large amounts of ETH to cold storage.","Geopolitical tensions in Eastern Europe cause market uncertainty."],hp={bids:[{price:68120.5,amount:.75,total:51090.37},{price:68119,amount:1.25,total:85148.75},{price:68118.5,amount:.5,total:34059.25},{price:68115,amount:2.1,total:143041.5},{price:68112,amount:3.5,total:238392}],asks:[{price:68122,amount:.9,total:61309.8},{price:68123.5,amount:1.5,total:102185.25},{price:68124,amount:.8,total:54499.2},{price:68128,amount:1.75,total:119224},{price:68130,amount:2.2,total:149886}]};let le=De[0].id,Y="gemini",W="llama3",X=50,$=null,R=null,Te=[],Z=[];const yp=100;let b=[],q=null,xt,he=null,te=null,z={},Ce=0,Tp=null;const G=()=>{try{const n={selectedPersonaId:le,selectedProviderId:Y,allocation:X,tradeHistory:Te,logEntries:Z,activeTrade:R,currentDirective:$,ollamaModel:W,userAnnotations:z,annotationCounter:Ce};localStorage.setItem("aiBitboyState",JSON.stringify(n))}catch(n){console.error("Failed to save state to localStorage:",n)}},Cp=()=>{const n=localStorage.getItem("aiBitboyState");if(n)try{const e=JSON.parse(n);return e?(le=e.selectedPersonaId||De[0].id,Y=e.selectedProviderId||"gemini",X=e.allocation||50,Te=e.tradeHistory||[],Z=e.logEntries||[],R=e.activeTrade||null,$=e.currentDirective||null,W=e.ollamaModel||"llama3",z=e.userAnnotations||{},Ce=e.annotationCounter||0,!0):!1}catch(e){return console.error("Failed to load state from localStorage:",e),localStorage.removeItem("aiBitboyState"),!1}return!1},_=n=>document.querySelector(n),vp=n=>document.querySelectorAll(n),Ep=async(n="BTCUSDT",e="1h",t=200)=>{try{P("Fetching historical market data from Binance...");const o=await fetch(`https://api.binance.com/api/v3/klines?symbol=${n}&interval=${e}&limit=${t}`);if(!o.ok)throw new Error(`Binance API error: ${o.statusText}`);const r=await o.json();return P("Historical data received."),r.map(l=>({x:l[0],o:parseFloat(l[1]),h:parseFloat(l[2]),l:parseFloat(l[3]),c:parseFloat(l[4]),v:parseFloat(l[5])}))}catch(o){return console.error("Failed to fetch initial chart data:",o),P(`Failed to fetch chart data: ${o.message}`,"error"),ae("Could not load live chart data.","error"),[]}},P=(n,e="default")=>{const t=new Date().toLocaleTimeString();Z.unshift({timestamp:t,message:n,type:e}),Z.length>yp&&Z.pop(),po(),G()},po=()=>{const n=_("#ai-log");if(!Z.length){n.innerHTML='<div class="placeholder">Log is clear.</div>';return}n.innerHTML=Z.map(e=>`
        <div class="log-item log-type-${e.type||"default"}">
            <span class="timestamp">${e.timestamp}</span>
            <span class="message">${e.message}</span>
        </div>
    `).join("")},mo=()=>{const n=_("#persona-selector");n.innerHTML=De.map(e=>`
        <div class="persona-card ${le===e.id?"active":""}" data-id="${e.id}" role="button" aria-pressed="${le===e.id}">
            <div class="persona-avatar"><i class="${e.icon}"></i></div>
            <div class="persona-name">${e.name}</div>
        </div>
    `).join("")},go=()=>{const n=_("#provider-selector");n.innerHTML=gp.map(e=>`
        <div class="provider-card ${Y===e.id?"active":""}" data-id="${e.id}" role="button" aria-pressed="${Y===e.id}">
            <div class="provider-avatar"><i class="${e.icon}"></i></div>
            <div class="provider-name">${e.name}</div>
        </div>
    `).join(""),_("#local-model-container").style.display=Y==="ollama"?"block":"none",_("#local-model-input").value=W},ho=()=>{const n=_("#trade-history");if(!Te.length){n.innerHTML='<div class="placeholder">No trades completed yet.</div>';return}n.innerHTML=Te.map(e=>`
        <div class="trade-item">
            <span>${e.asset} [${e.action}]</span>
            <span class="trade-item-pnl ${e.pnl>=0?"positive":"negative"}">
                ${e.pnl.toFixed(2)} (${e.pnlPercent.toFixed(2)}%)
            </span>
        </div>
    `).join("")},Sp=()=>{const n=_("#order-book-container"),{bids:e,asks:t}=hp,o=Math.max(...[...e,...t].map(u=>u.total)),r=e.map(u=>`
        <div class="order-book-row">
            <div class="depth-bar" style="width: ${u.total/o*100}%"></div>
            <span>${u.price.toFixed(2)}</span>
            <span>${u.amount.toFixed(4)}</span>
            <span>${(u.total/1e3).toFixed(1)}K</span>
        </div>
    `).join(""),l=t.map(u=>`
        <div class="order-book-row">
            <div class="depth-bar" style="width: ${u.total/o*100}%"></div>
            <span>${u.price.toFixed(2)}</span>
            <span>${u.amount.toFixed(4)}</span>
            <span>${(u.total/1e3).toFixed(1)}K</span>
        </div>
    `).join(""),a=t[0].price-e[0].price;n.innerHTML=`
        <h3 class="order-book-title">ORDER BOOK :: BTC/USD</h3>
        <div class="order-book-layout">
            <div class="order-book-column order-book-bids">
                <div class="order-book-header">
                    <span>PRICE (USD)</span>
                    <span>AMOUNT (BTC)</span>
                    <span>TOTAL</span>
                </div>
                <div class="order-book-rows">${r}</div>
            </div>
            <div class="order-book-spread">
                <span class="spread-value">${a.toFixed(2)}</span>
                <span class="spread-label">SPREAD</span>
            </div>
            <div class="order-book-column order-book-asks">
                <div class="order-book-header">
                    <span>PRICE (USD)</span>
                    <span>AMOUNT (BTC)</span>
                    <span>TOTAL</span>
                </div>
                <div class="order-book-rows">${l}</div>
            </div>
        </div>
    `},_p=()=>{const n=_("#news-feed");n.innerHTML=tn.map(e=>`<div class="news-item">${e}</div>`).join("")},Ip=(n,e)=>{const t=_("#sentiment-output"),o=n.toLowerCase(),r=e.map(l=>`<span class="keyword-tag">${l}</span>`).join("");t.innerHTML=`
        <span class="sentiment-tag ${o}">${n}</span>
        ${r}
    `},Ae=(n,e=!1,t=!1)=>{const o=_("#ai-status-text"),r=_("#status-light");o.textContent=n,r.classList.toggle("error",e),r.classList.toggle("pulse",!e&&t)},ae=(n,e="success")=>{const t=_("#notification-container"),o=document.createElement("div");o.className=`notification ${e}`,o.innerHTML=`<i class="fas ${e==="success"?"fa-check-circle":"fa-exclamation-triangle"}"></i> ${n}`,o.setAttribute("role",e==="error"?"alert":"status"),t.appendChild(o),setTimeout(()=>o.classList.add("show"),10),setTimeout(()=>{o.classList.remove("show"),o.addEventListener("transitionend",()=>o.remove())},5e3)},Ap=()=>{if(!$)return;const{asset:n,action:e,entry:t,target:o,stopLoss:r,reasoning:l}=$,a=_("#directive-output");a.innerHTML=`
        <div id="trade-confirmation" class="content-fade-in">
            <p class="reasoning-text">"${l}"</p>
            <div class="confirmation-details-grid">
                <div class="confirmation-detail-item"><strong>ASSET:</strong> <span>${n}</span></div>
                <div class="confirmation-detail-item"><strong>ACTION:</strong> <span class="action-${e.toLowerCase()}">${e}</span></div>
                <div class="confirmation-detail-item"><strong>ENTRY:</strong> <span>${t.toFixed(2)}</span></div>
                <div class="confirmation-detail-item"><strong>ALLOCATION:</strong> <span>${X}%</span></div>
                <div class="confirmation-detail-item"><strong>TARGET:</strong> <span>${o.toFixed(2)}</span></div>
                <div class="confirmation-detail-item"><strong>STOP:</strong> <span>${r.toFixed(2)}</span></div>
            </div>
        </div>`;const u=_(".btn-group");u.innerHTML=`
        <button id="reject-directive-btn" class="btn btn-sell">REJECT</button>
        <button id="execute-directive-btn" class="btn btn-buy">EXECUTE</button>
    `,_("#execute-directive-btn").addEventListener("click",kp),_("#reject-directive-btn").addEventListener("click",()=>{P("Directive rejected by user."),$=null,ke(),G()})},on=()=>{if(!R)return;const{asset:n,action:e,entry:t,target:o,stopLoss:r,allocation:l,currentPrice:a}=R,u=a||t,d=e==="LONG"?(u-t)*l:(t-u)*l,c=d/(t*l)*100*100,f=_("#directive-output");f.innerHTML=`
        <div id="live-trade-monitor" class="content-fade-in">
            <div class="trade-monitor-header">
                <span class="trade-monitor-asset">${n}</span>
                <span class="trade-monitor-direction direction-${e.toLowerCase()}">${e}</span>
            </div>
            <div class="pnl-display">
                <div class="pnl-value ${d>=0?"positive":"negative"}">${d.toFixed(2)} USD</div>
                <div class="pnl-percent ${d>=0?"positive":"negative"}">${c.toFixed(2)}%</div>
            </div>
            <div class="trade-details-grid">
                <div class="trade-detail-item"><strong>ENTRY:</strong> <span>${t.toFixed(2)}</span></div>
                <div class="trade-detail-item"><strong>CURRENT:</strong> <span>${u.toFixed(2)}</span></div>
            </div>
            <div class="trade-progress-bar" id="tp-progress">
                <div class="progress-label"><span>ENTRY</span><span>TARGET: ${o.toFixed(2)}</span></div>
                <div class="progress-track"><div class="progress-fill" style="width: ${Math.min(100,Math.max(0,(u-t)/(o-t)*100))}%;"></div></div>
            </div>
            <div class="trade-progress-bar" id="sl-progress">
                <div class="progress-label"><span>STOP: ${r.toFixed(2)}</span><span>ENTRY</span></div>
                <div class="progress-track"><div class="progress-fill" style="width: ${Math.min(100,Math.max(0,(t-u)/(t-r)*100))}%;"></div></div>
            </div>
        </div>
    `;const p=_(".btn-group");p.innerHTML='<button id="close-trade-btn" class="btn btn-sell">CLOSE TRADE</button>',_("#close-trade-btn").addEventListener("click",()=>me(u))},ke=()=>{_("#directive-output").innerHTML='<span class="placeholder">Select a persona and generate a directive...</span>',_(".btn-group").innerHTML='<button id="generate-directive-btn" class="btn btn-buy">GENERATE DIRECTIVE</button>',_("#generate-directive-btn").addEventListener("click",Dp),Ae("AWAITING DIRECTIVE")},Mp=()=>{const n=_("#wallet-connector");n.innerHTML=`
            <div class="connect-wallet-container">
                <button id="connect-wallet-btn">
                    <i class="fas fa-wallet"></i> CONNECT WALLET
                </button>
                <div class="recommended-wallets" title="Exodus and Trust Wallet are recommended">
                    <img src="https://www.exodus.com/img/icons/logo-icon-exodus.svg" alt="Exodus">
                    <img src="https://trustwallet.com/assets/images/media/assets/logo.svg" alt="Trust Wallet">
                </div>
            </div>
        `,_("#connect-wallet-btn").addEventListener("click",()=>Tp?.open())},Rp=()=>{{const n="WalletConnect projectId not set. Please get a valid ID from cloud.walletconnect.com";console.warn(n),P(n,"error"),_("#wallet-connector").innerHTML='<span class="wallet-address">WC Not Configured</span>';return}},Pp=n=>{const t=["asset","action","entry","target","stopLoss","reasoning"].filter(r=>!(r in n));if(t.length>0)return{isValid:!1,error:`Response is missing required field(s): ${t.join(", ")}`};if(n.action!=="LONG"&&n.action!=="SHORT")return{isValid:!1,error:`Invalid value for 'action': received '${n.action}', expected 'LONG' or 'SHORT'.`};const o=["entry","target","stopLoss"];for(const r of o)if(typeof n[r]!="number")return{isValid:!1,error:`Invalid type for '${r}': received '${typeof n[r]}', expected 'number'.`};return{isValid:!0}},xp=()=>{if(!$)return;const n=parseFloat(_("#manual-tp-input").value),e=parseFloat(_("#manual-sl-input").value);!isNaN(n)&&n>0&&($.target=n),!isNaN(e)&&e>0&&($.stopLoss=e)},Np=async()=>{const n=_("#sentiment-output");n.innerHTML='<div class="sentiment-output-placeholder">Analyzing feed...</div>',P("Initiating sentiment analysis of news feed...");try{const t=`Analyze the sentiment of the following financial news headlines and provide an overall sentiment and key contributing terms. Headlines: "${tn.join(" ")}"`,o=await fo.models.generateContent({model:"gemini-2.5-flash",contents:t,config:{responseMimeType:"application/json",responseSchema:mp}});P("Sentiment analysis response received.","ai-analysis");const r=JSON.parse(o.text.trim());if(!r.overallSentiment||!Array.isArray(r.keyTerms))throw new Error("Invalid sentiment data structure from AI.");Ip(r.overallSentiment,r.keyTerms)}catch(e){console.error("Sentiment analysis failed:",e),P(`Error during sentiment analysis: ${e.message}`,"error"),n.innerHTML='<div class="sentiment-output-error">Analysis failed.</div>'}},wp=async()=>{const n=_("#test-ollama-btn");n.disabled=!0,n.textContent="...";try{const e=await fetch("http://localhost:11434/api/tags");if(!e.ok)throw new Error(`Server responded with status ${e.status}`);const t=await e.json();if(ae("Ollama connection successful!","success"),t.models.some(r=>r.name.startsWith(W)))P(`Ollama connection test OK. Model "${W}" found on server.`);else{const r=t.models.length>0?t.models.map(l=>l.name.split(":")[0]).join(", "):"none";P(`Ollama connection test OK, but model "${W}" not found. Available: ${r}`,"default")}}catch(e){console.error("Ollama connection test failed:",e),ae("Ollama connection failed. Check server is running.","error"),P("Ollama connection failed. Ensure the server is running and CORS is configured for browser access. You may need to set the OLLAMA_ORIGINS environment variable before starting the Ollama server.","error")}finally{n.disabled=!1,n.textContent="Test"}},Dp=async()=>{_("#generate-directive-btn").disabled=!0,_(".btn-group").innerHTML='<button id="generate-directive-btn" class="btn btn-buy" disabled>SYNTHESIZING...</button>',_("#directive-output").innerHTML=`
        <div class="synthesizing-indicator">
             <span>SYNTHESIZING</span>
             <div class="cursor"></div>
        </div>`,Ae("SYNTHESIZING DIRECTIVE...",!1,!0);const n=De.find(o=>o.id===le);P(`Engaging ${Y.toUpperCase()} with ${n.name} persona...`);let e,t;try{const o=`Analyze the current market conditions and provide a trade directive. Current news: ${tn.join(" ")}`;if(Y==="gemini"){if(!nn)throw new Error("Gemini API key is not configured.");const a=await fo.models.generateContent({model:"gemini-2.5-flash",contents:o,config:{systemInstruction:n.systemInstruction,responseMimeType:"application/json",responseSchema:Pt}});P("AI analysis complete. Parsing response...","ai-analysis"),t=a.text.trim()}else if(Y==="ollama"){P(`Connecting to local Ollama instance with model: ${W}...`);try{const a=await fetch("http://localhost:11434/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:W,system:`${n.systemInstruction}

You MUST respond with a single, valid JSON object that conforms to the schema provided. Do not include any other text, markdown, or explanations before or after the JSON object.`,prompt:`The user's request is: "${o}". The required JSON schema is: ${JSON.stringify(Pt)}`,format:"json",stream:!1})});if(!a.ok){const d=await a.text();throw new Error(`Ollama request failed: ${a.status} - ${d}`)}const u=await a.json();if(!u.response)throw new Error('Ollama response is missing the "response" field.');P("Ollama analysis complete. Parsing response...","ai-analysis"),t=u.response}catch(a){throw a.message.includes("Failed to fetch")?new Error("Connection to local Ollama instance failed. Ensure it is running and CORS is configured for browser access. You may need to set the OLLAMA_ORIGINS environment variable before starting the Ollama server."):a}}else throw new Error(`Unsupported AI provider: ${Y}`);if(!t)throw new Error("AI provider returned an empty response.");try{e=JSON.parse(t)}catch{throw P(`Raw AI Response:
${t}`,"error"),new Error("AI response was not valid JSON. This can happen if the model includes explanatory text or if the request is unfulfillable. Check the logs for the raw response.")}const{isValid:r,error:l}=Pp(e);if(!r)throw new Error(`AI response validation failed: ${l} The JSON structure is correct, but required data is missing or invalid.`);Ae("DIRECTIVE RECEIVED"),$=e,xp(),Ap(),G()}catch(o){console.error("Directive generation failed:",o),P(`Error: ${o.message}`,"error"),Ae("SYNTHESIS FAILED",!0),_("#directive-output").innerHTML=`
            <div class="error-message">
                <h4>SYNTHESIS FAILED</h4>
                <p>${o.message.replace(/\n/g,"<br>")}</p>
                <p class="error-subtext">Check logs for more details.</p>
            </div>`,ae("Directive generation failed.","error"),setTimeout(ke,5e3)}},kp=()=>{$&&(R={...$,allocation:X/100},R.currentPrice=b.length>0?b[b.length-1].c:R.entry,$=null,P(`Executing ${R.action} on ${R.asset} at ${R.entry} with ${X}% allocation.`),ae(`Trade Executed: ${R.action} ${R.asset}`,"success"),on(),G())},me=n=>{if(!R)return;const{asset:e,action:t,entryPrice:o,allocation:r}={...R,entryPrice:R.entry},l=t==="LONG"?(n-o)*r:(o-n)*r,a=l/(o*r)*100*100;Te.unshift({asset:e,action:t,entryPrice:o,closePrice:n,pnl:l,pnlPercent:a,timestamp:new Date().toISOString()}),P(`Trade closed on ${e}. PnL: ${l.toFixed(2)} (${a.toFixed(2)}%)`),ae(`Trade Closed. PnL: ${l.toFixed(2)} USD`,"success"),R=null,ho(),ke(),G()},Lp=()=>{xt||(xt=window.setInterval(async()=>{try{const n=await fetch("https://api.binance.com/api/v3/ticker/24hr?symbol=BTCUSDT");if(!n.ok){console.warn(`Failed to fetch live price: ${n.statusText}`);return}const e=await n.json(),t=parseFloat(e.lastPrice);q&&b.length>0&&(b[b.length-1].c=t,q.data.datasets[0].data=b,q.update("none"));const o=_("#data-point-volume");if(o){const r=(parseFloat(e.quoteVolume)/1e6).toFixed(1);o.textContent=`$${r}M`}R&&(R.currentPrice=t,R.action==="LONG"&&t>=R.target?(P(`Take profit hit for ${R.asset}!`),me(R.target)):R.action==="LONG"&&t<=R.stopLoss?(P(`Stop loss hit for ${R.asset}.`,"error"),me(R.stopLoss)):R.action==="SHORT"&&t<=R.target?(P(`Take profit hit for ${R.asset}!`),me(R.target)):R.action==="SHORT"&&t>=R.stopLoss?(P(`Stop loss hit for ${R.asset}.`,"error"),me(R.stopLoss)):on())}catch(n){console.warn("Error fetching live price:",n)}},3e3))},Up=n=>{const e=_("#chart-data-modal"),t=_("#modal-body"),o=n.c-n.o,r=o/n.o*100;t.innerHTML=`
        <div class="data-detail-row">
            <span class="label">Time</span>
            <span class="value">${dateFns.format(new Date(n.x),"MMM dd, yyyy HH:mm:ss")}</span>
        </div>
        <div class="data-detail-row">
            <span class="label">Open</span>
            <span class="value">${n.o.toFixed(2)}</span>
        </div>
        <div class="data-detail-row">
            <span class="label">High</span>
            <span class="value">${n.h.toFixed(2)}</span>
        </div>
        <div class="data-detail-row">
            <span class="label">Low</span>
            <span class="value">${n.l.toFixed(2)}</span>
        </div>
        <div class="data-detail-row">
            <span class="label">Close</span>
            <span class="value">${n.c.toFixed(2)}</span>
        </div>
        <div class="data-detail-row">
            <span class="label">Change</span>
            <span class="value ${o>=0?"positive":"negative"}">
                ${o.toFixed(2)} (${r.toFixed(2)}%)
            </span>
        </div>
        <div class="data-detail-row">
            <span class="label">Volume</span>
            <span class="value">${n.v.toFixed(2)}</span>
        </div>
    `,e.classList.add("show")},Nt=()=>{_("#chart-data-modal").classList.remove("show")},Fp=n=>{if(!he)return;const e=Chart.helpers.getRelativePosition(n,q),t=q.scales.x.getValueForPixel(e.x),o=q.scales.y.getValueForPixel(e.y);if(he==="trendline")if(!te)te={x:t,y:o},P("Trendline start point set. Click to set end point.");else{const r=`trendline_${Ce++}`;z[r]={type:"line",xMin:te.x,yMin:te.y,xMax:t,yMax:o,borderColor:"#E6DB74",borderWidth:2},q.options.plugins.annotation.annotations=z,q.update(),P("Trendline created."),te=null,G(),ye(null)}else if(he==="annotation"){const r=prompt("Enter annotation text:");if(r){const l=`label_${Ce++}`;z[l]={type:"label",xValue:t,yValue:o,content:r,backgroundColor:"rgba(39, 40, 34, 0.8)",color:"#F8F8F2",font:{size:12,family:"Roboto Mono"},padding:6,borderRadius:4},q.options.plugins.annotation.annotations=z,q.update(),P(`Annotation added: "${r}"`),G()}ye(null)}},Vp=(n,e)=>{if(he){Fp(n);return}if(e.length>0){const t=e[0],o=q.data.datasets[t.datasetIndex].data[t.index];Up(o)}},qp=async()=>{const n=_("#marketChart").getContext("2d");if(!n)return;b=await Ep();const e={type:"line",data:{datasets:[{label:"BTC/USD",data:b,parsing:{yAxisKey:"c"},borderColor:"#66D9EF",backgroundColor:"rgba(102, 217, 239, 0.1)",borderWidth:2,pointRadius:0,fill:!0,tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"hour",tooltipFormat:"MMM dd, HH:mm",displayFormats:{hour:"HH:mm"}},grid:{color:"rgba(73, 72, 62, 0.5)"},ticks:{color:"#75715E"}},y:{grid:{color:"rgba(73, 72, 62, 0.5)"},ticks:{color:"#75715E"}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#272822",titleFont:{family:"Roboto Mono"},bodyFont:{family:"Roboto Mono"},padding:10,callbacks:{title:function(t){const o=new Date(t[0].parsed.x);return dateFns.format(o,"MMM dd, yyyy HH:mm")},label:function(t){let o=t.dataset.label||"";return o&&(o+=": "),t.parsed.y!==null&&(o+=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.parsed.y)),o}}},zoom:{pan:{enabled:!0,mode:"xy"},zoom:{wheel:{enabled:!0},mode:"xy"}},annotation:{annotations:z}},onClick:Vp}};q=new Chart(n,e)},ye=n=>{he=n,te=null,vp(".chart-tool-btn").forEach(e=>e.classList.remove("active")),n?(_(`#${n==="trendline"?"draw-trendline":"add-annotation"}-btn`).classList.add("active"),P(`Drawing mode activated: ${n}.`)):P("Drawing mode deactivated.")},Gp=()=>{_("#persona-selector").addEventListener("click",o=>{const r=o.target.closest(".persona-card");r&&r.dataset.id&&(le=r.dataset.id,mo(),G())}),_("#provider-selector").addEventListener("click",o=>{const r=o.target.closest(".provider-card");r&&r.dataset.id&&(Y=r.dataset.id,go(),G())}),_("#local-model-input").addEventListener("change",o=>{W=o.target.value.trim(),P(`Ollama model set to: ${W}`),G()}),_("#test-ollama-btn").addEventListener("click",wp);const n=_("#allocation-slider"),e=_("#allocation-value");n.addEventListener("input",()=>{X=parseInt(n.value),e.textContent=`${X}%`}),n.addEventListener("change",G),_("#reset-zoom-btn").addEventListener("click",()=>q?.resetZoom()),_("#draw-trendline-btn").addEventListener("click",()=>ye("trendline")),_("#add-annotation-btn").addEventListener("click",()=>ye("annotation")),_("#clear-drawings-btn").addEventListener("click",()=>{z={},Ce=0,q.options.plugins.annotation.annotations=z,q.update(),P("Cleared all drawings from chart."),ye(null),G()});const t=_("#chart-data-modal");_("#modal-close-btn").addEventListener("click",Nt),t.addEventListener("click",o=>{o.target===t&&Nt()})},Hp=async()=>{const n=Cp();P("AI-BITBOY-DEX Strategic Synthesis Core initialized."),n&&P("Previous session settings restored."),_("#allocation-slider").value=String(X),_("#allocation-value").textContent=`${X}%`,Rp(),Mp(),mo(),go(),_p(),Np(),Sp(),po(),ho(),await qp(),R?on():ke(),Gp(),Lp()};document.addEventListener("DOMContentLoaded",Hp);
